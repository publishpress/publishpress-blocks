/*! For license information please see preset-manager.js.LICENSE.txt */
(()=>{"use strict";var e={45:e=>{e.exports={to12Hour:function(e){var t=e<12?"am":"pm";return{hour:(e+11)%12+1,meridiem:t,meridian:t}},to24Hour:function(e){return("am"===(e.meridiem||e.meridian)?0:12)+e.hour%12}}}},t={};function a(n){var r=t[n];if(void 0!==r)return r.exports;var o=t[n]={exports:{}};return e[n](o,o.exports,a),o.exports}a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var n=a(45),r=a.n(n);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function l(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,c(n.key),n)}}function c(e){var t=function(e){if("object"!=o(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var a=t.call(e,"string");if("object"!=o(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==o(t)?t:t+""}function i(e,t,a){return t=u(t),function(e,t){if(t&&("object"==o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,s()?Reflect.construct(t,a||[],u(e).constructor):t.apply(e,a))}function s(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(s=function(){return!!e})()}function u(e){return u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},u(e)}function d(e,t){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},d(e,t)}function g(e){return function(e){if(Array.isArray(e))return m(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||p(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var n,r,o,l,c=[],i=!0,s=!1;try{if(o=(a=a.call(e)).next,0===t){if(Object(a)!==a)return;i=!1}else for(;!(i=(n=o.call(a)).done)&&(c.push(n.value),c.length!==t);i=!0);}catch(e){s=!0,r=e}finally{try{if(!i&&null!=a.return&&(l=a.return(),Object(l)!==l))return}finally{if(s)throw r}}return c}}(e,t)||p(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){if(e){if("string"==typeof e)return m(e,t);var a={}.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?m(e,t):void 0}}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=Array(t);a<t;a++)n[a]=e[a];return n}var b=wp.components,h=b.ButtonGroup,f=b.Button,y=b.DateTimePicker,R=(b.TextControl,b.CheckboxControl),w=b.Popover,E=b.Tooltip,S=b.SelectControl,C=(b.Icon,wp.element),P=C.Component,k=C.Fragment,x=C.useState,D=wp.i18n,N=D.__,O=D._x,T=wp.hooks.applyFilters;function A(e){var t=v(x(!1),2),a=t[0],n=t[1],r=function(){n(!a)},o=e.buttonLabel,l=e.dateLabel,c=e.date,i=e.onChangeDate,s=e.onDateClear,u=e.onInvalidDate,d=e.placement,g=e.offset;return React.createElement(k,null,React.createElement("div",{className:"advgb-advcalendar-control"},React.createElement("label",null,l),React.createElement("div",null,React.createElement(f,{isLink:!0,icon:"calendar",onClick:r},React.createElement(E,{text:N("Change date","advanced-gutenberg")},React.createElement("span",null,c?moment(c).format("MMMM DD YYYY, h:mm a"):o))),c&&React.createElement(f,{icon:"no-alt",className:"advgb-advcalendar-remove-icon",onClick:function(){return s()}}))),a&&React.createElement(w,{className:"advgb-advcalendar-popover",onClose:n.bind(null,!1),resize:!1,placement:d,offset:g},React.createElement("label",{className:"advgb-advcalendar-popover-label"},l,React.createElement(f,{icon:"no-alt",className:"advgb-advcalendar-remove-icon",onClick:r})),React.createElement(y,{currentDate:c,onChange:i,is12Hour:!0,isInvalidDate:u})))}function _(e){var t=[{slug:0,label:O("S","Sunday first letter","advanced-gutenberg")},{slug:1,label:N("M","advanced-gutenberg")},{slug:2,label:O("T","Tuesday first letter","advanced-gutenberg")},{slug:3,label:N("W","advanced-gutenberg")},{slug:4,label:O("T","Thursday first letter","advanced-gutenberg")},{slug:5,label:N("F","advanced-gutenberg")},{slug:6,label:O("S","Saturday first letter","advanced-gutenberg")}],a=e.label,n=e.days,r=void 0===n?[]:n,o=e.onChangeDays,l=v(x(Array.isArray(r)?r:[]),2),c=l[0],i=l[1];function s(e){return c.some((function(t){return t===e}))}return React.createElement(k,null,React.createElement("div",{className:"advgb-checkbox-wrapper"},React.createElement("label",null,a),React.createElement("div",{className:"advgb-checkbox-inline"},t.map((function(e){return React.createElement(R,{label:e.label,checked:s(e.slug),onChange:function(){return function(e){var a;if(s(e))a=c.filter((function(t){return t!==e}));else{var n=t.find((function(t){return t.slug===e}));a=[].concat(g(c),[n.slug])}var r=g(new Set(a));i(r),o&&o(a)}(e.slug)}})})))))}A.defaultProps={placement:"left",offset:40};var j=function(e){function t(e){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(a=i(this,t,[e])).state={onChangeTime:null,currentTime:a.props.currentTime||null,hours:null,minutes:null,meridian:"am",onInit:!0},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}(t,e),a=t,(n=[{key:"componentWillMount",value:function(){var e=this.state,t=e.onChangeTime,a=e.currentTime,n=e.onInit;this.props.onChangeTime!==t&&this.setState({onChangeTime:this.props.onChangeTime}),this.props.currentTime!==a&&this.setState({currentTime:this.props.currentTime}),a&&a.includes(":")&&n&&this.setState({hours:a.split(":")[0],minutes:a.split(":")[1],meridian:parseInt(a.split(":")[0])>11?"pm":"am",onInit:!1})}},{key:"componentDidUpdate",value:function(e,t){var a=this.props,n=(a.onChangeTime,a.currentTime,this.state),o=n.hours,l=n.minutes,c=n.meridian,i=t.hours,s=t.minutes,u=t.meridian;if(o!==i||l!==s||c!==u){if(!o&&!l)return;o&&!l&&this.setState({minutes:"00"}),l&&!o&&this.setState({hours:"01"});var d="".concat(this.appendZero(r().to24Hour({hour:parseInt(o),meridiem:c})),":").concat(l,":00");this.props.onChangeTime(d)}}},{key:"appendZero",value:function(e){if(!isNaN(e)){var t=parseInt(e);return t>9?t:"0".concat(t)}}},{key:"render",value:function(){var e=this,t=this.state,a=(t.onChangeTime,t.currentTime,t.hours),n=t.minutes,o=t.meridian;return React.createElement(k,null,React.createElement("div",{className:"advgb-advtime-control"},React.createElement("label",null,this.props.label),React.createElement("div",{className:"advgb-advtime-hours-minutes"},React.createElement("input",{type:"text",value:a?this.appendZero(r().to12Hour(parseInt(a)).hour):"",onChange:function(t){var a=Math.max(1,Math.min(12,Number(t.target.value)));e.setState({hours:e.appendZero(a)})},onKeyDown:function(t){var a=Number(t.target.value);"ArrowUp"===t.key&&a<12?e.setState({hours:e.appendZero(a+1)}):"ArrowDown"===t.key&&a>1&&e.setState({hours:e.appendZero(a-1)})},placeholder:"--"}),React.createElement("span",null,":"),React.createElement("input",{type:"text",value:n||"",onChange:function(t){var a=Math.max(0,Math.min(59,Number(t.target.value)));e.setState({minutes:e.appendZero(a)})},onKeyDown:function(t){var a=Number(t.target.value);"ArrowUp"===t.key&&a<59?e.setState({minutes:e.appendZero(a+1)}):"ArrowDown"===t.key&&a>0&&e.setState({minutes:e.appendZero(a-1)})},placeholder:"--"})),React.createElement(h,{className:"advgb-advtime-meridian"},React.createElement(f,{variant:null===o||"am"===o?"primary":"secondary",onClick:function(){e.setState({meridian:"am"})},disabled:!a||!n},N("AM","advanced-gutenberg")),React.createElement(f,{variant:"pm"===o?"primary":"secondary",onClick:function(){e.setState({meridian:"pm"})},disabled:!a||!n},N("PM","advanced-gutenberg"))),a&&n&&React.createElement(f,{className:"advgb-advtime-remove-icon",icon:"no-alt",onClick:function(){e.props.onTimeClear(),e.setState({hours:null,minutes:null,meridian:"am"})}})))}}])&&l(a.prototype,n),Object.defineProperty(a,"prototype",{writable:!1}),a;var a,n}(P);function F(e){var t=e.label,a=e.currentTime,n=e.onChangeTime,r=e.onTimeClear;return React.createElement(j,{label:t,currentTime:a,onChangeTime:n,onTimeClear:r})}function B(e){var t=e.label,a=e.defaultTimezone;return React.createElement(k,null,T("advgb.timezoneControl",React.createElement(k,null,React.createElement("div",{className:"advgb-promo-overlay-area"},React.createElement("div",{className:"advgb-blur"},t,React.createElement(S,{value:a,options:[{label:a,value:a}],disabled:!0})),React.createElement("div",{class:"advgb-pro-overlay-wrap"},React.createElement("div",{class:"advgb-pro-overlay-text advgb-tooltips ppb-tooltips-library click","data-toggle":"ppbtooltip","data-placement":"top"},React.createElement("span",{class:"advgb-promo-text"},N("Pro","advanced-gutenberg")),React.createElement("span",{class:"tooltip-text"},React.createElement("p",null,N("PublishPress Blocks Pro supports Timezone configuration.","advanced-gutenberg")),React.createElement("p",null,React.createElement("a",{class:"clickable",href:"https://publishpress.com/links/blocks",target:"_blank"},N("Upgrade to Pro","advanced-gutenberg"))),React.createElement("i",null))))),React.createElement(React.Fragment,null)),e))}var L=function(e){return e.map((function(e){return e.title}))},M=function(e,t){var a=[];return null!==t&&(a=e.map((function(e){var a=t.find((function(t){return t.slug===e}));return void 0!==a&&a?a.title:e}))),a},G=function(e,t){var a=[];return e.map((function(e){var n=t.find((function(t){return t.title===e}));void 0!==n&&a.push(n.slug)})),a};function I(e){return I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},I(e)}function z(e){return function(e){if(Array.isArray(e))return U(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return U(e,t);var a={}.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?U(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function U(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=Array(t);a<t;a++)n[a]=e[a];return n}function H(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function W(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?H(Object(a),!0).forEach((function(t){Y(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):H(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function Y(e,t,a){return(t=V(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function q(){q=function(){return t};var e,t={},a=Object.prototype,n=a.hasOwnProperty,r=Object.defineProperty||function(e,t,a){e[t]=a.value},o="function"==typeof Symbol?Symbol:{},l=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",i=o.toStringTag||"@@toStringTag";function s(e,t,a){return Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,a){return e[t]=a}}function u(e,t,a,n){var o=t&&t.prototype instanceof h?t:h,l=Object.create(o.prototype),c=new O(n||[]);return r(l,"_invoke",{value:k(e,a,c)}),l}function d(e,t,a){try{return{type:"normal",arg:e.call(t,a)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var g="suspendedStart",v="suspendedYield",p="executing",m="completed",b={};function h(){}function f(){}function y(){}var R={};s(R,l,(function(){return this}));var w=Object.getPrototypeOf,E=w&&w(w(T([])));E&&E!==a&&n.call(E,l)&&(R=E);var S=y.prototype=h.prototype=Object.create(R);function C(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function P(e,t){function a(r,o,l,c){var i=d(e[r],e,o);if("throw"!==i.type){var s=i.arg,u=s.value;return u&&"object"==I(u)&&n.call(u,"__await")?t.resolve(u.__await).then((function(e){a("next",e,l,c)}),(function(e){a("throw",e,l,c)})):t.resolve(u).then((function(e){s.value=e,l(s)}),(function(e){return a("throw",e,l,c)}))}c(i.arg)}var o;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){a(e,n,t,r)}))}return o=o?o.then(r,r):r()}})}function k(t,a,n){var r=g;return function(o,l){if(r===p)throw Error("Generator is already running");if(r===m){if("throw"===o)throw l;return{value:e,done:!0}}for(n.method=o,n.arg=l;;){var c=n.delegate;if(c){var i=x(c,n);if(i){if(i===b)continue;return i}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===g)throw r=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=p;var s=d(t,a,n);if("normal"===s.type){if(r=n.done?m:v,s.arg===b)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r=m,n.method="throw",n.arg=s.arg)}}}function x(t,a){var n=a.method,r=t.iterator[n];if(r===e)return a.delegate=null,"throw"===n&&t.iterator.return&&(a.method="return",a.arg=e,x(t,a),"throw"===a.method)||"return"!==n&&(a.method="throw",a.arg=new TypeError("The iterator does not provide a '"+n+"' method")),b;var o=d(r,t.iterator,a.arg);if("throw"===o.type)return a.method="throw",a.arg=o.arg,a.delegate=null,b;var l=o.arg;return l?l.done?(a[t.resultName]=l.value,a.next=t.nextLoc,"return"!==a.method&&(a.method="next",a.arg=e),a.delegate=null,b):l:(a.method="throw",a.arg=new TypeError("iterator result is not an object"),a.delegate=null,b)}function D(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function N(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(D,this),this.reset(!0)}function T(t){if(t||""===t){var a=t[l];if(a)return a.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function a(){for(;++r<t.length;)if(n.call(t,r))return a.value=t[r],a.done=!1,a;return a.value=e,a.done=!0,a};return o.next=o}}throw new TypeError(I(t)+" is not iterable")}return f.prototype=y,r(S,"constructor",{value:y,configurable:!0}),r(y,"constructor",{value:f,configurable:!0}),f.displayName=s(y,i,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,s(e,i,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},C(P.prototype),s(P.prototype,c,(function(){return this})),t.AsyncIterator=P,t.async=function(e,a,n,r,o){void 0===o&&(o=Promise);var l=new P(u(e,a,n,r),o);return t.isGeneratorFunction(a)?l:l.next().then((function(e){return e.done?e.value:l.next()}))},C(S),s(S,i,"Generator"),s(S,l,(function(){return this})),s(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),a=[];for(var n in t)a.push(n);return a.reverse(),function e(){for(;a.length;){var n=a.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=T,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(N),!t)for(var a in this)"t"===a.charAt(0)&&n.call(this,a)&&!isNaN(+a.slice(1))&&(this[a]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var a=this;function r(n,r){return c.type="throw",c.arg=t,a.next=n,r&&(a.method="next",a.arg=e),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var l=this.tryEntries[o],c=l.completion;if("root"===l.tryLoc)return r("end");if(l.tryLoc<=this.prev){var i=n.call(l,"catchLoc"),s=n.call(l,"finallyLoc");if(i&&s){if(this.prev<l.catchLoc)return r(l.catchLoc,!0);if(this.prev<l.finallyLoc)return r(l.finallyLoc)}else if(i){if(this.prev<l.catchLoc)return r(l.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<l.finallyLoc)return r(l.finallyLoc)}}}},abrupt:function(e,t){for(var a=this.tryEntries.length-1;a>=0;--a){var r=this.tryEntries[a];if(r.tryLoc<=this.prev&&n.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var l=o?o.completion:{};return l.type=e,l.arg=t,o?(this.method="next",this.next=o.finallyLoc,b):this.complete(l)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),b},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.finallyLoc===e)return this.complete(a.completion,a.afterLoc),N(a),b}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.tryLoc===e){var n=a.completion;if("throw"===n.type){var r=n.arg;N(a)}return r}}throw Error("illegal catch attempt")},delegateYield:function(t,a,n){return this.delegate={iterator:T(t),resultName:a,nextLoc:n},"next"===this.method&&(this.arg=e),b}},t}function Z(e,t,a,n,r,o,l){try{var c=e[o](l),i=c.value}catch(e){return void a(e)}c.done?t(i):Promise.resolve(i).then(n,r)}function K(e){return function(){var t=this,a=arguments;return new Promise((function(n,r){var o=e.apply(t,a);function l(e){Z(o,n,r,l,c,"next",e)}function c(e){Z(o,n,r,l,c,"throw",e)}l(void 0)}))}}function Q(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,V(n.key),n)}}function V(e){var t=function(e){if("object"!=I(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var a=t.call(e,"string");if("object"!=I(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==I(t)?t:t+""}function $(e,t,a){return t=X(t),function(e,t){if(t&&("object"==I(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,J()?Reflect.construct(t,a||[],X(e).constructor):t.apply(e,a))}function J(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(J=function(){return!!e})()}function X(e){return X=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},X(e)}function ee(e,t){return ee=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ee(e,t)}!function(e,t,a,n){var r=e.__,o=e.sprintf,l=(t.Card,t.CardBody,t.CardHeader,t.Button),c=t.TextControl,i=t.TextareaControl,s=t.SelectControl,u=t.ToggleControl,d=(t.RangeControl,t.FormTokenField),g=t.Modal,v=t.Notice,p=t.Spinner,m=(t.PanelBody,t.BaseControl,t.RadioControl,t.DateTimePicker,a.Component),b=a.Fragment,h=(n.useSelect,n.useDispatch,function(e){var t=e.index,a=e.schedule,n=e.onChange,c=e.onRemove,i=e.getTimezoneLabel,s=e.getTimezoneSlug,d=e.canRemove;return React.createElement("div",{style:{marginBottom:5,padding:5,border:"1px solid #ddd",borderRadius:4}},React.createElement("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:16}},React.createElement("h4",null,o(r("Schedule #%d","advanced-gutenberg"),t+1)),d&&React.createElement(l,{isDestructive:!0,isLink:!0,onClick:c},r("Remove","advanced-gutenberg"))),React.createElement(A,{buttonLabel:r("Now","advanced-gutenberg"),dateLabel:r("Start showing","advanced-gutenberg"),date:a.dateFrom,onChangeDate:function(e){return n("dateFrom",e)},onDateClear:function(){return n("dateFrom",null)},onInvalidDate:!1}),React.createElement(A,{buttonLabel:r("Never","advanced-gutenberg"),dateLabel:r("Stop showing","advanced-gutenberg"),date:a.dateTo||null,onChangeDate:function(e){return n("dateTo",e)},onDateClear:function(){return n("dateTo",null)},onInvalidDate:function(e){if(a.dateFrom){var t=new Date(e.getTime());t.setHours(0,0,0,0);var n=new Date(a.dateFrom);return n.setHours(0,0,0,0),t.getTime()<n.getTime()}return!1}}),a.dateFrom&&a.dateTo&&React.createElement(u,{label:r("Recurring","advanced-gutenberg"),checked:a.recurring||!1,onChange:function(){return n("recurring",!a.recurring)},help:r("If Recurring is enabled, this block will be displayed every year between the selected dates.","advanced-gutenberg")}),React.createElement(_,{label:r("On these days (optional)","advanced-gutenberg"),days:a.days||[],onChangeDays:function(e){return n("days",e)}}),React.createElement("label",{style:{marginBottom:8,display:"block"}},r("Between these times (optional)","advanced-gutenberg")),React.createElement(F,{label:r("From","advanced-gutenberg"),currentTime:a.timeFrom||null,onChangeTime:function(e){return n("timeFrom",e)},onTimeClear:function(){return n("timeFrom",null)}}),React.createElement(F,{label:r("To","advanced-gutenberg"),currentTime:a.timeTo||null,onChangeTime:function(e){return n("timeTo",e)},onTimeClear:function(){return n("timeTo",null)}}),a.timeFrom&&a.timeTo&&"01/01/2020T"+a.timeFrom>="01/01/2020T"+a.timeTo&&React.createElement(v,{className:"advgb-notice-sidebar",status:"warning",isDismissible:!1},r('"To" time should be after "From" time!',"advanced-gutenberg")),React.createElement(B,{label:r("Timezone","advanced-gutenberg"),defaultTimezone:i(),value:a.timezone||s(),onChangeTimezone:function(e){return n("timezone",e)}}))}),f=function(e){function t(e){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(a=$(this,t,[e])).state={presets:[],currentPreset:a.getDefaultPreset(),editingPreset:null,showModal:!1,modalMode:"create",loading:!1,saving:!1,error:null,deleting:!1,deletingPresetId:null,lastAction:null},a.handleModalClose=a.handleModalClose.bind(a),a.createNewPreset=a.createNewPreset.bind(a),a.editPreset=a.editPreset.bind(a),a.savePreset=a.savePreset.bind(a),a.deletePreset=a.deletePreset.bind(a),a.addControlSet=a.addControlSet.bind(a),a.removeControlSet=a.removeControlSet.bind(a),a.addRuleToSet=a.addRuleToSet.bind(a),a.removeRuleFromSet=a.removeRuleFromSet.bind(a),a.updateRuleData=a.updateRuleData.bind(a),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ee(e,t)}(t,e),a=t,n=[{key:"componentDidMount",value:function(){this.setState({loading:!0}),this.initializePresets(),this.setupDataSync()}},{key:"componentWillUnmount",value:function(){this.dataUnsubscribe&&window.AdvGBPresetData&&window.AdvGBPresetData.unsubscribe(this.dataUnsubscribe)}},{key:"setupDataSync",value:function(){var e=this;window.AdvGBPresetData&&window.AdvGBPresetData.subscribe&&(this.dataUnsubscribe=window.AdvGBPresetData.subscribe((function(t){e.setState({presets:Array.isArray(t)?t:[],editingPreset:e.state.editingPreset&&t.find((function(t){return t.id===e.state.editingPreset.id}))?e.state.editingPreset:null,currentPreset:e.state.currentPreset&&t.find((function(t){return t.id===e.state.currentPreset.id}))?e.state.currentPreset:null})})))}},{key:"createSamplePresets",value:(R=K(q().mark((function e(){var t;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({loading:!0,error:null}),e.prev=1,e.next=4,wp.apiFetch({path:"/advgb/v1/sample-presets",method:"POST"});case 4:(t=e.sent).success&&(window.AdvGBPresetData&&window.AdvGBPresetData.updatePresets(t.presets,"add"),this.setState({presets:t.presets,lastAction:"installed",loading:!1})),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),console.error("Failed to create sample presets:",e.t0),this.setState({error:r("Failed to create sample presets","advanced-gutenberg"),loading:!1});case 12:case"end":return e.stop()}}),e,this,[[1,8]])}))),function(){return R.apply(this,arguments)})},{key:"initializePresets",value:(y=K(q().mark((function e(){var t;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.waitForGlobalData();case 3:return e.next=5,this.loadPresetsFromSources();case 5:t=e.sent,this.setState({presets:t,loading:!1,currentPreset:this.getDefaultPreset()}),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.error("Failed to initialize presets:",e.t0),this.setState({loading:!1,error:r("Failed to load presets","advanced-gutenberg")});case 13:case"end":return e.stop()}}),e,this,[[0,9]])}))),function(){return y.apply(this,arguments)})},{key:"waitForGlobalData",value:function(){return new Promise((function(e){!function t(){window.AdvGBPresetData||window.advgb_block_controls_vars&&window.advgb_block_controls_vars.presets?e():setTimeout(t,100)}()}))}},{key:"loadPresetsFromSources",value:(f=K(q().mark((function e(){var t,a,n;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,wp.apiFetch({path:"/advgb/v1/presets"});case 3:if(t=e.sent,!Array.isArray(t)){e.next=6;break}return e.abrupt("return",t);case 6:if(!window.AdvGBPresetData||"function"!=typeof window.AdvGBPresetData.getAllPresets){e.next=10;break}if(a=window.AdvGBPresetData.getAllPresets(),!Array.isArray(a)){e.next=10;break}return e.abrupt("return",a);case 10:case 20:return e.abrupt("return",[]);case 13:if(e.prev=13,e.t0=e.catch(0),console.warn("Failed to load presets:",e.t0),!window.AdvGBPresetData||"function"!=typeof window.AdvGBPresetData.getAllPresets){e.next=20;break}if(n=window.AdvGBPresetData.getAllPresets(),!Array.isArray(n)){e.next=20;break}return e.abrupt("return",n);case 21:case"end":return e.stop()}}),e,null,[[0,13]])}))),function(){return f.apply(this,arguments)})},{key:"loadPresets",value:function(){window.AdvGBPresetData&&this.setState({presets:window.AdvGBPresetData.getAllPresets(),loading:!1})}},{key:"getDefaultPreset",value:function(){return{id:null,title:"",controlSets:[],created:null,modified:null}}},{key:"savePreset",value:(m=K(q().mark((function e(t){var a,n;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({saving:!0,error:null}),e.prev=1,e.next=4,wp.apiFetch({path:"/advgb/v1/presets",method:"POST",data:t});case 4:if(!(a=e.sent).success){e.next=11;break}return e.next=8,this.loadPresets();case 8:return a.presets.find((function(e){return e.id===a.id}))?(n=a.presets||[],window.AdvGBPresetData&&window.AdvGBPresetData.updatePresets(n),this.setState({editingPreset:null,currentPreset:null,saving:!1,showModal:!1,lastAction:"saved"})):this.setState({saving:!1,showModal:!1,lastAction:"saved"}),e.abrupt("return",a);case 11:e.next=17;break;case 13:throw e.prev=13,e.t0=e.catch(1),this.setState({error:e.t0.message,saving:!1,lastAction:"error"}),e.t0;case 17:case"end":return e.stop()}}),e,this,[[1,13]])}))),function(e){return m.apply(this,arguments)})},{key:"deletePreset",value:(o=K(q().mark((function e(t){var a;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({deleting:!0,deletingPresetId:t}),e.prev=1,e.next=4,wp.apiFetch({path:"/advgb/v1/presets/".concat(t),method:"DELETE"});case 4:if(!(a=e.sent).success){e.next=11;break}return window.AdvGBPresetData&&window.AdvGBPresetData.updatePresets(a.presets,"delete"),this.state.editingPreset&&this.state.editingPreset.id===t&&this.setState({editingPreset:null,currentPreset:this.getDefaultPreset()}),this.setState({deleting:!1,deletingPresetId:null,currentPreset:null,editingPreset:null,lastAction:"deleted"}),e.next=11,this.loadPresets();case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),this.setState({deleting:!1,deletingPresetId:null,error:e.t0.message});case 16:case"end":return e.stop()}}),e,this,[[1,13]])}))),function(e){return o.apply(this,arguments)})},{key:"createNewPreset",value:function(){this.setState({currentPreset:this.getDefaultPreset(),editingPreset:null,modalMode:"create",showModal:!0,lastAction:"creating"})}},{key:"editPreset",value:function(e){this.setState({currentPreset:W({},e),modalMode:"edit",editingPreset:e,showModal:!0,lastAction:"editing"})}},{key:"toggleControlSet",value:function(e){var t=this.state.currentPreset,a=z(t.controlSets),n=!1!==a[e].expanded;a[e].expanded=!n,this.setState({currentPreset:W(W({},t),{},{controlSets:a})})}},{key:"toggleRule",value:function(e,t){var a=this.state.currentPreset,n=z(a.controlSets),r=!1!==n[e].rules[t].expanded;n[e].rules[t].expanded=!r,this.setState({currentPreset:W(W({},a),{},{controlSets:n})})}},{key:"isControlSetExpanded",value:function(e){var t=this.state.currentPreset;return!t.controlSets||!t.controlSets[e]||!1!==t.controlSets[e].expanded}},{key:"isRuleExpanded",value:function(e,t){var a=this.state.currentPreset;return!(a.controlSets&&a.controlSets[e]&&a.controlSets[e].rules&&a.controlSets[e].rules[t])||!1!==a.controlSets[e].rules[t].expanded}},{key:"addControlSet",value:function(){var e=[{id:Date.now().toString(),rules:[],expanded:!0}].concat(z(this.state.currentPreset.controlSets));this.setState({currentPreset:W(W({},this.state.currentPreset),{},{controlSets:e})})}},{key:"removeControlSet",value:function(e){var t=this.state.currentPreset,a=t.controlSets.filter((function(t,a){return a!==e}));this.setState({currentPreset:W(W({},t),{},{controlSets:a})})}},{key:"addRuleToSet",value:function(e,t){var a=this.createRuleByType(t),n=z(this.state.currentPreset.controlSets);n[e].rules.unshift(a),this.setState({currentPreset:W(W({},this.state.currentPreset),{},{controlSets:n})})}},{key:"createRuleByType",value:function(e){var t={id:Date.now(),type:e,enabled:!0,expanded:!0};switch(e){case"schedule":return W(W({},t),{},{schedules:[]});case"user_role":return W(W({},t),{},{roles:[],approach:"include"});case"device_type":return W(W({},t),{},{devices:[]});case"device_width":return W(W({},t),{},{min_width:"",max_width:""});case"browser_device":return W(W({},t),{},{browsers:[],approach:"include"});case"operating_system":return W(W({},t),{},{systems:[],approach:"include"});case"cookie":return W(W({},t),{},{name:"",condition:"=",value:"",approach:"include"});case"user_meta":case"post_meta":return W(W({},t),{},{key:"",condition:"=",value:"",approach:"include"});case"query_string":return W(W({},t),{},{queries:[],logic:"all",approach:"include"});case"capabilities":return W(W({},t),{},{capabilities:[],approach:"include"});case"archive":return W(W({},t),{},{taxonomies:[],approach:"include"});case"page":return W(W({},t),{},{pages:[],approach:"include"});default:return t}}},{key:"getAvailableRuleTypes",value:function(){return[{value:"schedule",label:r("Schedule","advanced-gutenberg")},{value:"user_role",label:r("User Roles","advanced-gutenberg")},{value:"device_type",label:r("Device Type","advanced-gutenberg")},{value:"device_width",label:r("Device Width","advanced-gutenberg")},{value:"browser_device",label:r("Browser","advanced-gutenberg")},{value:"operating_system",label:r("Operating System","advanced-gutenberg")},{value:"cookie",label:r("Cookie","advanced-gutenberg")},{value:"user_meta",label:r("User Meta","advanced-gutenberg")},{value:"post_meta",label:r("Post Meta","advanced-gutenberg")},{value:"query_string",label:r("Query String","advanced-gutenberg")},{value:"capabilities",label:r("Capabilities","advanced-gutenberg")},{value:"archive",label:r("Archive","advanced-gutenberg")},{value:"page",label:r("Page","advanced-gutenberg")}]}},{key:"formatDate",value:function(e){if(!e)return r("Never modified","advanced-gutenberg");try{var t=new Date(e);return isNaN(t.getTime())?r("Invalid date","advanced-gutenberg"):t.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})}catch(e){return console.error("Date formatting error:",e),r("Invalid date","advanced-gutenberg")}}},{key:"getRuleTypeLabel",value:function(e){var t=this.getAvailableRuleTypes().find((function(t){return t.value===e}));return t?t.label:e}},{key:"renderPresetList",value:function(){var e=this,t=this.state,a=t.presets,n=t.editingPreset;return React.createElement("div",{className:"advgb-presets-list"},(!a||0===a.length)&&React.createElement("div",{className:"advgb-empty-presets-message"},React.createElement("div",{className:"advgb-empty-icon"},"📋"),React.createElement("h3",null,r("No presets yet","advanced-gutenberg")),React.createElement("p",null,r("Create your first preset or generate sample presets to get started.","advanced-gutenberg")),React.createElement("div",{className:"advgb-empty-actions"},React.createElement(l,{isPrimary:!0,onClick:function(){return e.createNewPreset()},className:"advgb-create-first-btn"},r("Create First Preset","advanced-gutenberg")),React.createElement(l,{isSecondary:!0,onClick:function(){return e.createSamplePresets()},className:"advgb-create-samples-btn"},r("Create Sample Presets","advanced-gutenberg")))),a&&a.length>0&&a.map((function(t){var a=["advgb-preset-item",n&&n.id===t.id&&"active"].filter(Boolean).join(" ");return React.createElement("div",{key:t.id,className:a,onClick:function(){return e.editPreset(t)}},React.createElement("div",{className:"advgb-preset-content"},React.createElement("span",{className:"advgb-preset-title",title:t.title},t.title)),React.createElement("div",{className:"advgb-preset-list-actions"},React.createElement(l,{isSmall:!0,icon:"edit",label:r("Edit","advanced-gutenberg"),onClick:function(a){a.stopPropagation(),e.editPreset(t)}})))})))}},{key:"renderPresetForm",value:function(){var e=this,t=this.state,a=t.currentPreset,n=t.saving;return a?React.createElement("div",{className:"advgb-preset-form"},React.createElement("div",{className:"advgb-preset-header"},React.createElement("div",{className:"advgb-preset-title-section"},React.createElement(c,{label:r("Preset Title","advanced-gutenberg"),value:a.title||"",onChange:function(t){return e.setState({currentPreset:W(W({},a),{},{title:t})})},placeholder:r("Enter preset name","advanced-gutenberg"),className:"advgb-title-input"}))),React.createElement("div",{className:"advgb-control-sets-container"},React.createElement("div",{className:"advgb-control-sets-header"},React.createElement("h3",null,r("Control Sets","advanced-gutenberg")),React.createElement("p",{className:"advgb-control-sets-description"},r("Show the block if any control set applies. Each set can contain multiple rules.","advanced-gutenberg")),React.createElement(l,{isPrimary:!0,icon:"plus",onClick:this.addControlSet,className:"advgb-add-set-btn"},r("Add Control Set","advanced-gutenberg"))),React.createElement("div",{className:"advgb-control-sets"},(a.controlSets||[]).map((function(t,a){return React.createElement(b,{key:t.id||a},a>0&&React.createElement("div",{className:"advgb-set-separator"},React.createElement("span",{className:"advgb-separator-text"},r("OR","advanced-gutenberg"))),e.renderControlSet(t,a))})))),React.createElement("div",{className:"advgb-preset-actions"},a.id&&React.createElement("div",{className:"ppb-tooltips-library click advgb-delete-preset-tooltip","data-toggle":"ppbtooltip","data-placement":"top"},React.createElement(l,{className:"advgb-delete-preset-btn is-destructive-outline",icon:"trash",label:r("Delete Preset","advanced-gutenberg")},r("Delete Preset","advanced-gutenberg")),React.createElement("div",{className:"tooltip-text"},React.createElement("p",null,r("Are you sure you want to delete preset?","advanced-gutenberg"),React.createElement(l,{isSmall:!0,isDestructive:!0,label:r("Delete Preset","advanced-gutenberg"),onClick:function(t){t.stopPropagation(),e.deletePreset(a.id)}},React.createElement("strong",null,r("Yes, Delete Preset.","advanced-gutenberg"))),"|",React.createElement(l,{isSmall:!0,label:r("No, Cancel","advanced-gutenberg")},r("No, Cancel.","advanced-gutenberg"))),React.createElement("i",null))),React.createElement(l,{isPrimary:!0,onClick:function(){return e.savePreset(e.state.currentPreset)},disabled:n||!a.title,isBusy:n,className:"advgb-save-btn"},r(n?"Saving...":"Save Preset","advanced-gutenberg")),React.createElement(l,{isSecondary:!0,onClick:this.handleModalClose,disabled:n},r("Cancel","advanced-gutenberg")))):null}},{key:"renderControlSet",value:function(e,t){var a=this,n=this.isControlSetExpanded(t);return React.createElement("div",{className:"advgb-control-set",key:e.id||t},React.createElement("div",{className:"advgb-control-set-header"},React.createElement("div",{className:"advgb-set-info advgb-preset-clickable-area",onClick:function(){return a.toggleControlSet(t)}},React.createElement("div",{className:"advgb-set-title-row"},React.createElement("span",{className:"dashicons dashicons-arrow-".concat(n?"down":"right")}),React.createElement("div",{className:"title-row-text"},React.createElement("h4",null,r("Control Set","advanced-gutenberg")," ",t+1),React.createElement("p",null,r("Show the block if any rule applies. Rules are evaluated with AND logic.","advanced-gutenberg"))))),React.createElement("div",{className:"advgb-set-actions"},React.createElement(s,{value:"",options:[{value:"",label:r("Add Rule","advanced-gutenberg")}].concat(z(this.getAvailableRuleTypes())),onChange:function(e){e&&a.addRuleToSet(t,e)},className:"advgb-add-rule-select"}),React.createElement("div",{className:"ppb-tooltips-library click","data-toggle":"ppbtooltip","data-placement":"left"},React.createElement(l,{isSmall:!0,isDestructive:!0,icon:"trash",label:r("Delete Set","advanced-gutenberg")}),React.createElement("div",{className:"tooltip-text"},React.createElement("p",null,r("Are you sure you want to delete set?","advanced-gutenberg"),React.createElement(l,{isSmall:!0,isDestructive:!0,label:r("Delete Set","advanced-gutenberg"),onClick:function(){return a.removeControlSet(t)}},React.createElement("strong",null,r("Yes, Delete Set.","advanced-gutenberg"))),"|",React.createElement(l,{isSmall:!0,label:r("No, Cancel","advanced-gutenberg")},r("No, Cancel.","advanced-gutenberg"))),React.createElement("i",null))))),n&&React.createElement("div",{className:"advgb-control-set-rules"},(e.rules||[]).map((function(e,n){return React.createElement("div",{key:e.id||n,className:"advgb-rule-container"},n>0&&React.createElement("div",{className:"advgb-rule-separator"},React.createElement("span",{className:"advgb-separator-text"},r("AND","advanced-gutenberg"))),a.renderControlRule(e,t,n))})),(!e.rules||0===e.rules.length)&&React.createElement("div",{className:"advgb-no-rules"},React.createElement("div",{className:"advgb-no-rules-icon"},"⚡"),React.createElement("p",null,r("No rules added yet. Add rules to define when this block should be visible.","advanced-gutenberg")))))}},{key:"renderControlRule",value:function(e,t,a){var n=this,o=this.isRuleExpanded(t,a);return React.createElement("div",{className:"advgb-control-rule"},React.createElement("div",{className:"advgb-rule-header"},React.createElement("div",{className:"advgb-rule-type advgb-preset-clickable-area",onClick:function(){return n.toggleRule(t,a)}},React.createElement("span",{className:"dashicons dashicons-arrow-".concat(o?"down":"right")}),React.createElement("span",{className:"advgb-rule-type-icon"},"📋"),React.createElement("span",{className:"advgb-rule-type-label"},this.getRuleTypeLabel(e.type))),React.createElement("div",{className:"advgb-rule-actions"},React.createElement("div",{className:"ppb-tooltips-library click","data-toggle":"ppbtooltip","data-placement":"left"},React.createElement(l,{isSmall:!0,isDestructive:!0,icon:"trash",label:r("Remove Rule","advanced-gutenberg")}),React.createElement("div",{className:"tooltip-text"},React.createElement("p",null,r("Are you sure you want to remove rule?","advanced-gutenberg"),React.createElement(l,{isSmall:!0,isDestructive:!0,label:r("Remove Rule","advanced-gutenberg"),onClick:function(){return n.removeRuleFromSet(t,a)}},React.createElement("strong",null,r("Yes, Remove Rule.","advanced-gutenberg"))),"|",React.createElement(l,{isSmall:!0,label:r("No, Cancel","advanced-gutenberg")},r("No, Cancel.","advanced-gutenberg"))),React.createElement("i",null))))),o&&React.createElement("div",{className:"advgb-rule-content"},this.renderRuleConfiguration(e,t,a)))}},{key:"renderRuleConfiguration",value:function(e,t,a){switch(e.type){case"schedule":return this.renderScheduleConfig(e,t,a);case"user_role":return this.renderUserRoleConfig(e,t,a);case"device_type":return this.renderDeviceTypeConfig(e,t,a);case"device_width":return this.renderDeviceWidthConfig(e,t,a);case"browser_device":return this.renderBrowserDeviceConfig(e,t,a);case"operating_system":return this.renderOperatingSystemConfig(e,t,a);case"cookie":return this.renderCookieConfig(e,t,a);case"user_meta":return this.renderUserMetaConfig(e,t,a);case"post_meta":return this.renderPostMetaConfig(e,t,a);case"query_string":return this.renderQueryStringConfig(e,t,a);case"capabilities":return this.renderCapabilitiesConfig(e,t,a);case"archive":return this.renderArchiveConfig(e,t,a);case"page":return this.renderPageConfig(e,t,a);default:return React.createElement("p",null,r("Configuration for this rule type is missing.","advanced-gutenberg"))}}},{key:"updateRuleData",value:function(e,t,a,n){var r=this.state.currentPreset,o=z(r.controlSets);o[e].rules[t][a]=n,this.setState({currentPreset:W(W({},r),{},{controlSets:o})})}},{key:"removeRuleFromSet",value:function(e,t){var a=this.state.currentPreset,n=z(a.controlSets);n[e].rules.splice(t,1),this.setState({currentPreset:W(W({},a),{},{controlSets:n})})}},{key:"handleModalClose",value:function(){this.setState({showModal:!1,currentPreset:null,editingPreset:null,modalMode:"create",lastAction:"cancelled"})}},{key:"getBrowserOptions",value:function(){return[{slug:"chrome",title:"Chrome"},{slug:"firefox",title:"Firefox"},{slug:"safari",title:"Safari"},{slug:"edge",title:"Edge"},{slug:"opera",title:"Opera"},{slug:"internet explorer",title:"Internet Explorer"}]}},{key:"getOperatingSystemOptions",value:function(){return[{slug:"windows",title:"Windows"},{slug:"mac",title:"macOS"},{slug:"linux",title:"Linux"},{slug:"android",title:"Android"},{slug:"ios",title:"iOS"},{slug:"chrome os",title:"Chrome OS"}]}},{key:"getConditionOptions",value:function(){return[{label:"=",value:"="},{label:"!=",value:"!="},{label:"<",value:"<"},{label:">",value:">"},{label:"<=",value:"<="},{label:">=",value:">="},{label:"contains",value:"contains"},{label:"begins with",value:"beginsWith"},{label:"ends with",value:"endsWith"},{label:"does not contain",value:"doesNotContain"},{label:"does not begin with",value:"doesNotBeginWith"},{label:"does not end with",value:"doesNotEndWith"},{label:"is null",value:"null"},{label:"is not null",value:"notNull"}]}},{key:"getUserRoles",value:function(){return void 0!==advgb_block_controls_vars.user_roles?advgb_block_controls_vars.user_roles:[]}},{key:"getCapabilitiesOptions",value:function(){return(void 0!==advgb_block_controls_vars.capabilities?advgb_block_controls_vars.capabilities:[]).map((function(e){return{slug:e,title:e.split("_").map((function(e){return e.charAt(0).toUpperCase()+e.slice(1)})).join(" ")}}))}},{key:"getArchiveOptions",value:function(){return[{slug:"category",title:r("Category Archives","advanced-gutenberg")},{slug:"tag",title:r("Tag Archives","advanced-gutenberg")},{slug:"date",title:r("Date Archives","advanced-gutenberg")},{slug:"author",title:r("Author Archives","advanced-gutenberg")}]}},{key:"getPageOptions",value:function(){return void 0!==advgb_block_controls_vars.page?advgb_block_controls_vars.page:[]}},{key:"getTimezoneLabel",value:function(){return r("WordPress settings timezone","advanced-gutenberg")}},{key:"getTimezoneSlug",value:function(){return void 0!==advgbBlocks.timezone&&advgbBlocks.timezone.length?advgbBlocks.timezone:"UTC"}},{key:"renderScheduleConfig",value:function(e,t,a){var n=this,o=e.schedules&&e.schedules.length>0?e.schedules:[{dateFrom:null,dateTo:null,recurring:!1,days:[],timeFrom:null,timeTo:null,timezone:this.getTimezoneSlug()}];return React.createElement(b,null,o.map((function(e,r){return React.createElement(h,{key:r,index:r,schedule:e,onChange:function(e,l){var c=z(o);c[r][e]=l,n.updateRuleData(t,a,"schedules",c)},onRemove:function(){if(o.length>1){var e=o.filter((function(e,t){return t!==r}));n.updateRuleData(t,a,"schedules",e)}},getTimezoneLabel:function(){return n.getTimezoneLabel()},getTimezoneSlug:function(){return n.getTimezoneSlug()},canRemove:o.length>1})})),React.createElement("div",{style:{marginBottom:16}},React.createElement(l,{style:{width:"100%",display:"block"},isSecondary:!0,onClick:function(){var e={dateFrom:null,dateTo:null,recurring:!1,days:[],timeFrom:null,timeTo:null,timezone:n.getTimezoneSlug()};n.updateRuleData(t,a,"schedules",[].concat(z(o),[e]))}},r("Add Another Schedule","advanced-gutenberg"))))}},{key:"renderUserRoleConfig",value:function(e,t,a){var n=this;return React.createElement(b,null,React.createElement(s,{label:r("Approach","advanced-gutenberg"),value:e.approach||"public",options:[{value:"public",label:r("Show to everyone","advanced-gutenberg")},{value:"hidden",label:r("Hide from everyone","advanced-gutenberg")},{value:"login",label:r("Show to logged in users","advanced-gutenberg")},{value:"logout",label:r("Show to logged out users","advanced-gutenberg")},{value:"include",label:r("Show to selected user roles","advanced-gutenberg")},{value:"exclude",label:r("Hide from selected user roles","advanced-gutenberg")}],onChange:function(e){return n.updateRuleData(t,a,"approach",e)}}),("include"===e.approach||"exclude"===e.approach)&&React.createElement(d,{multiple:!0,label:r("Select user roles","advanced-gutenberg"),placeholder:r("Search roles","advanced-gutenberg"),suggestions:L(this.getUserRoles()),maxSuggestions:10,value:M(e.roles||[],this.getUserRoles()),onChange:function(e){n.updateRuleData(t,a,"roles",G(e,n.getUserRoles()))},__experimentalExpandOnFocus:!0}))}},{key:"renderDeviceTypeConfig",value:function(e,t,a){var n=this,o=e.devices||[];return React.createElement(b,null,React.createElement("div",{style:{paddingLeft:"17%"}},["desktop","tablet","mobile","robot"].map((function(e){return React.createElement(u,{key:e,label:r(e.charAt(0).toUpperCase()+e.slice(1),"advanced-gutenberg"),checked:o.includes(e),onChange:function(){var r=o.includes(e)?o.filter((function(t){return t!==e})):[].concat(z(o),[e]);n.updateRuleData(t,a,"devices",r)}})}))))}},{key:"renderDeviceWidthConfig",value:function(e,t,a){var n=this;return React.createElement(b,null,React.createElement(c,{type:"number",label:r("Minimum width (px)","advanced-gutenberg"),value:e.min_width||"",onChange:function(e){return n.updateRuleData(t,a,"min_width",e)},placeholder:r("No minimum","advanced-gutenberg")}),React.createElement(c,{type:"number",label:r("Maximum width (px)","advanced-gutenberg"),value:e.max_width||"",onChange:function(e){return n.updateRuleData(t,a,"max_width",e)},placeholder:r("No maximum","advanced-gutenberg")}))}},{key:"renderBrowserDeviceConfig",value:function(e,t,a){var n=this;return React.createElement(b,null,React.createElement(d,{multiple:!0,label:r("Select Browsers","advanced-gutenberg"),placeholder:r("Search browsers","advanced-gutenberg"),suggestions:L(this.getBrowserOptions()),maxSuggestions:10,value:M(e.browsers||[],this.getBrowserOptions()),onChange:function(e){n.updateRuleData(t,a,"browsers",G(e,n.getBrowserOptions()))},__experimentalExpandOnFocus:!0}),React.createElement(s,{label:r("Approach","advanced-gutenberg"),value:e.approach||"include",options:[{label:r("Show to selected browsers","advanced-gutenberg"),value:"include"},{label:r("Hide from selected browsers","advanced-gutenberg"),value:"exclude"}],onChange:function(e){return n.updateRuleData(t,a,"approach",e)}}))}},{key:"renderOperatingSystemConfig",value:function(e,t,a){var n=this;return React.createElement(b,null,React.createElement(d,{multiple:!0,label:r("Select Operating Systems","advanced-gutenberg"),placeholder:r("Search operating systems","advanced-gutenberg"),suggestions:L(this.getOperatingSystemOptions()),maxSuggestions:10,value:M(e.systems||[],this.getOperatingSystemOptions()),onChange:function(e){n.updateRuleData(t,a,"systems",G(e,n.getOperatingSystemOptions()))},__experimentalExpandOnFocus:!0}),React.createElement(s,{label:r("Approach","advanced-gutenberg"),value:e.approach||"include",options:[{label:r("Show to selected OS","advanced-gutenberg"),value:"include"},{label:r("Hide from selected OS","advanced-gutenberg"),value:"exclude"}],onChange:function(e){return n.updateRuleData(t,a,"approach",e)}}))}},{key:"renderCookieConfig",value:function(e,t,a){var n=this;return React.createElement(b,null,React.createElement(c,{label:r("Cookie Name","advanced-gutenberg"),value:e.name||"",onChange:function(e){return n.updateRuleData(t,a,"name",e)}}),React.createElement(s,{label:r("Condition","advanced-gutenberg"),value:e.condition||"=",options:this.getConditionOptions(),onChange:function(e){return n.updateRuleData(t,a,"condition",e)}}),React.createElement(c,{label:r("Value","advanced-gutenberg"),value:e.value||"",onChange:function(e){return n.updateRuleData(t,a,"value",e)}}),React.createElement(s,{label:r("Approach","advanced-gutenberg"),value:e.approach||"include",options:[{label:r("Show when condition matches","advanced-gutenberg"),value:"include"},{label:r("Hide when condition matches","advanced-gutenberg"),value:"exclude"}],onChange:function(e){return n.updateRuleData(t,a,"approach",e)}}))}},{key:"renderUserMetaConfig",value:function(e,t,a){var n=this;return React.createElement(b,null,React.createElement(c,{label:r("Meta Key","advanced-gutenberg"),value:e.key||"",onChange:function(e){return n.updateRuleData(t,a,"key",e)}}),React.createElement(s,{label:r("Condition","advanced-gutenberg"),value:e.condition||"=",options:this.getConditionOptions(),onChange:function(e){return n.updateRuleData(t,a,"condition",e)}}),React.createElement(c,{label:r("Value","advanced-gutenberg"),value:e.value||"",onChange:function(e){return n.updateRuleData(t,a,"value",e)}}),React.createElement(s,{label:r("Approach","advanced-gutenberg"),value:e.approach||"include",options:[{label:r("Show when condition matches","advanced-gutenberg"),value:"include"},{label:r("Hide when condition matches","advanced-gutenberg"),value:"exclude"}],onChange:function(e){return n.updateRuleData(t,a,"approach",e)}}))}},{key:"renderPostMetaConfig",value:function(e,t,a){var n=this;return React.createElement(b,null,React.createElement(c,{label:r("Meta Key","advanced-gutenberg"),value:e.key||"",onChange:function(e){return n.updateRuleData(t,a,"key",e)}}),React.createElement(s,{label:r("Condition","advanced-gutenberg"),value:e.condition||"=",options:this.getConditionOptions(),onChange:function(e){return n.updateRuleData(t,a,"condition",e)}}),React.createElement(c,{label:r("Value","advanced-gutenberg"),value:e.value||"",onChange:function(e){return n.updateRuleData(t,a,"value",e)}}),React.createElement(s,{label:r("Approach","advanced-gutenberg"),value:e.approach||"include",options:[{label:r("Show when condition matches","advanced-gutenberg"),value:"include"},{label:r("Hide when condition matches","advanced-gutenberg"),value:"exclude"}],onChange:function(e){return n.updateRuleData(t,a,"approach",e)}}))}},{key:"renderQueryStringConfig",value:function(e,t,a){var n=this,o=Array.isArray(e.queries)?e.queries.join("\n"):e.queries||"";return React.createElement(b,null,React.createElement(i,{label:r("Query Parameters","advanced-gutenberg"),help:r("Enter query parameter names, one per line","advanced-gutenberg"),value:o,onChange:function(e){n.updateRuleData(t,a,"queries",e)},placeholder:r("utm_source\nutm_medium\nref","advanced-gutenberg")}),React.createElement(s,{label:r("Logic","advanced-gutenberg"),value:e.logic||"all",options:[{label:r("All parameters must be present","advanced-gutenberg"),value:"all"},{label:r("Any parameter must be present","advanced-gutenberg"),value:"any"}],onChange:function(e){return n.updateRuleData(t,a,"logic",e)}}),React.createElement(s,{label:r("Approach","advanced-gutenberg"),value:e.approach||"include",options:[{label:r("Show when condition matches","advanced-gutenberg"),value:"include"},{label:r("Hide when condition matches","advanced-gutenberg"),value:"exclude"}],onChange:function(e){return n.updateRuleData(t,a,"approach",e)}}))}},{key:"renderCapabilitiesConfig",value:function(e,t,a){var n=this;return React.createElement(b,null,React.createElement(d,{multiple:!0,label:r("Select Capabilities","advanced-gutenberg"),placeholder:r("Search capabilities","advanced-gutenberg"),suggestions:L(this.getCapabilitiesOptions()),maxSuggestions:10,value:M(e.capabilities||[],this.getCapabilitiesOptions()),onChange:function(e){n.updateRuleData(t,a,"capabilities",G(e,n.getCapabilitiesOptions()))},__experimentalExpandOnFocus:!0}),React.createElement(s,{label:r("Approach","advanced-gutenberg"),value:e.approach||"include",options:[{label:r("Show to users with selected capabilities","advanced-gutenberg"),value:"include"},{label:r("Hide from users with selected capabilities","advanced-gutenberg"),value:"exclude"}],onChange:function(e){return n.updateRuleData(t,a,"approach",e)}}))}},{key:"renderArchiveConfig",value:function(e,t,a){var n=this;return React.createElement(b,null,React.createElement(d,{multiple:!0,label:r("Select Archive Types","advanced-gutenberg"),placeholder:r("Search archive types","advanced-gutenberg"),suggestions:L(this.getArchiveOptions()),maxSuggestions:10,value:M(e.archives||[],this.getArchiveOptions()),onChange:function(e){n.updateRuleData(t,a,"archives",G(e,n.getArchiveOptions()))},__experimentalExpandOnFocus:!0}),React.createElement(s,{label:r("Approach","advanced-gutenberg"),value:e.approach||"include",options:[{label:r("Show on selected archives","advanced-gutenberg"),value:"include"},{label:r("Hide from selected archives","advanced-gutenberg"),value:"exclude"}],onChange:function(e){return n.updateRuleData(t,a,"approach",e)}}))}},{key:"renderPageConfig",value:function(e,t,a){var n=this;return React.createElement(b,null,React.createElement(d,{multiple:!0,label:r("Select Pages","advanced-gutenberg"),placeholder:r("Search pages","advanced-gutenberg"),suggestions:L(this.getPageOptions()),maxSuggestions:10,value:M(e.pages||[],this.getPageOptions()),onChange:function(e){n.updateRuleData(t,a,"pages",G(e,n.getPageOptions()))},__experimentalExpandOnFocus:!0}),React.createElement(s,{label:r("Approach","advanced-gutenberg"),value:e.approach||"include",options:[{label:r("Show on selected pages","advanced-gutenberg"),value:"include"},{label:r("Hide from selected pages","advanced-gutenberg"),value:"exclude"}],onChange:function(e){return n.updateRuleData(t,a,"approach",e)}}))}},{key:"renderContextualMessage",value:function(e){var t,a,n,o=this;switch(e){case"cancelled":t="↩️",a=r("Edit Cancelled","advanced-gutenberg"),n=r("Edit cancelled. Select another preset to edit or create a new one.","advanced-gutenberg");break;case"saved":t="✅",a=r("Preset Saved!","advanced-gutenberg"),n=r("Preset saved successfully! Choose another preset to edit or create a new one.","advanced-gutenberg");break;case"deleted":t="🗑️",a=r("Preset Deleted","advanced-gutenberg"),n=r("Preset deleted. Select another preset to edit or create a new one.","advanced-gutenberg");break;case"error":t="⚠️",a=r("Action Completed","advanced-gutenberg"),n=r("Operation completed. You can continue editing presets or create new ones.","advanced-gutenberg");break;case"loaded":t="📋",a=r("Select a Preset to Edit","advanced-gutenberg"),n=r("Choose a preset from the list to edit its rules, or create a new preset to get started.","advanced-gutenberg");break;case"empty":t="📝",a=r("No Presets Yet","advanced-gutenberg"),n=r("Create your first preset to start managing block visibility rules.","advanced-gutenberg");break;case"installed":t="✅",a=r("Samples Created!","advanced-gutenberg"),n=r("Preset samples created successfully! Choose a preset to edit or create a new one.","advanced-gutenberg");break;default:t="👋",a=r("Manage Your Presets","advanced-gutenberg"),n=r("Select a preset to edit or create a new one to control block visibility.","advanced-gutenberg")}return React.createElement(React.Fragment,null,React.createElement("div",{className:"advgb-guidance-icon"},t),React.createElement("h3",null,a),React.createElement("p",null,n),React.createElement("div",{className:"advgb-guidance-actions"},React.createElement(l,{isPrimary:!0,onClick:function(){return o.createNewPreset()},className:"advgb-guidance-create-btn"},r("Create New Preset","advanced-gutenberg")),"loaded"===e&&React.createElement(l,{isSecondary:!0,onClick:function(){return o.createSamplePresets()},className:"advgb-guidance-samples-btn"},r("Add More Samples","advanced-gutenberg"))))}},{key:"render",value:function(){var e=this,t=this.state,a=(t.showModal,t.loading),n=t.error,o=t.currentPreset,c=t.editingPreset,i=t.deleting,s=t.presets,u=t.lastAction,d=this.props.isModal,m=void 0!==d&&d,b=o||c,h=s&&s.length>0;if(a)return React.createElement("div",{className:"advgb-preset-loading-container"},React.createElement("div",{className:"advgb-preset-loading-spinner"},React.createElement("div",{className:"advgb-spinner"},React.createElement("div",{className:"advgb-spinner-circle"})),React.createElement("p",null,r("Loading presets...","advanced-gutenberg"))));if(n)return React.createElement(v,{status:"error"},n);var f=React.createElement("div",{className:"advgb-preset-manager ".concat(i?"deleting":"")},i&&React.createElement("div",{className:"advgb-preset-deleting-overlay"},React.createElement("div",{className:"advgb-preset-deleting-message"},React.createElement(p,null))),React.createElement("div",{className:"advgb-preset-sidebar"},React.createElement("div",{className:"advgb-preset-sidebar-header"},h&&!b&&React.createElement(l,{isPrimary:!0,onClick:function(){return e.createNewPreset()}},r("Add New","advanced-gutenberg"))),this.renderPresetList()),React.createElement("div",{className:"advgb-preset-editor"},(h||"creating"==u)&&b&&this.renderPresetForm(),!h&&"creating"!==u&&React.createElement("div",{className:"advgb-welcome-message"},React.createElement("div",{className:"advgb-welcome-icon"},"🚀"),React.createElement("h3",null,r("Welcome to Block Control Presets","advanced-gutenberg")),React.createElement("p",null,r("Create your first preset or generate sample presets to get started with block visibility rules.","advanced-gutenberg"))),h&&!b&&React.createElement("div",{className:"advgb-guidance-message","data-action":u},this.renderContextualMessage(u))));return m?React.createElement(g,{title:r("Block Control Presets","advanced-gutenberg"),onRequestClose:this.handleModalClose,isDismissible:!0,shouldCloseOnClickOutside:!1,shouldCloseOnEsc:!0,isFullScreen:!0,className:"advgb-preset-modal"},f):f}}],n&&Q(a.prototype,n),Object.defineProperty(a,"prototype",{writable:!1}),a;var a,n,o,m,f,y,R}(m);window.AdvGBPresetManager=f}(wp.i18n,wp.components,wp.element,wp.data)})();
//# sourceMappingURL=preset-manager.js.map