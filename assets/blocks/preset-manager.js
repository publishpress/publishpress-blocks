/*! For license information please see preset-manager.js.LICENSE.txt */
(()=>{"use strict";var e={45:e=>{e.exports={to12Hour:function(e){var t=e<12?"am":"pm";return{hour:(e+11)%12+1,meridiem:t,meridian:t}},to24Hour:function(e){return("am"===(e.meridiem||e.meridian)?0:12)+e.hour%12}}}},t={};function n(a){var r=t[a];if(void 0!==r)return r.exports;var o=t[a]={exports:{}};return e[a](o,o.exports,n),o.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var a=n(45),r=n.n(a);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function l(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,i(a.key),a)}}function i(e){var t=function(e){if("object"!=o(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==o(t)?t:t+""}function c(e,t,n){return t=u(t),function(e,t){if(t&&("object"==o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,s()?Reflect.construct(t,n||[],u(e).constructor):t.apply(e,n))}function s(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(s=function(){return!!e})()}function u(e){return u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},u(e)}function d(e,t){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},d(e,t)}function g(e){return function(e){if(Array.isArray(e))return m(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||p(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,r,o,l,i=[],c=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(a=o.call(n)).done)&&(i.push(a.value),i.length!==t);c=!0);}catch(e){s=!0,r=e}finally{try{if(!c&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(s)throw r}}return i}}(e,t)||p(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){if(e){if("string"==typeof e)return m(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?m(e,t):void 0}}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=Array(t);n<t;n++)a[n]=e[n];return a}var b=wp.components,h=b.ButtonGroup,f=b.Button,y=b.DateTimePicker,w=(b.TextControl,b.CheckboxControl),R=b.Popover,E=b.Tooltip,S=b.SelectControl,P=(b.Icon,wp.element),C=P.Component,k=P.Fragment,D=P.useState,x=wp.i18n,O=x.__,T=x._x,N=wp.hooks.applyFilters;function A(e){var t=v(D(!1),2),n=t[0],a=t[1],r=function(){a(!n)},o=e.buttonLabel,l=e.dateLabel,i=e.date,c=e.onChangeDate,s=e.onDateClear,u=e.onInvalidDate,d=e.placement,g=e.offset;return React.createElement(k,null,React.createElement("div",{className:"advgb-advcalendar-control"},React.createElement("label",null,l),React.createElement("div",null,React.createElement(f,{isLink:!0,icon:"calendar",onClick:r},React.createElement(E,{text:O("Change date","advanced-gutenberg")},React.createElement("span",null,i?moment(i).format("MMMM DD YYYY, h:mm a"):o))),i&&React.createElement(f,{icon:"no-alt",className:"advgb-advcalendar-remove-icon",onClick:function(){return s()}}))),n&&React.createElement(R,{className:"advgb-advcalendar-popover",onClose:a.bind(null,!1),resize:!1,placement:d,offset:g},React.createElement("label",{className:"advgb-advcalendar-popover-label"},l,React.createElement(f,{icon:"no-alt",className:"advgb-advcalendar-remove-icon",onClick:r})),React.createElement(y,{currentDate:i,onChange:c,is12Hour:!0,isInvalidDate:u})))}function _(e){var t=[{slug:0,label:T("S","Sunday first letter","advanced-gutenberg")},{slug:1,label:O("M","advanced-gutenberg")},{slug:2,label:T("T","Tuesday first letter","advanced-gutenberg")},{slug:3,label:O("W","advanced-gutenberg")},{slug:4,label:T("T","Thursday first letter","advanced-gutenberg")},{slug:5,label:O("F","advanced-gutenberg")},{slug:6,label:T("S","Saturday first letter","advanced-gutenberg")}],n=e.label,a=e.days,r=void 0===a?[]:a,o=e.onChangeDays,l=v(D(Array.isArray(r)?r:[]),2),i=l[0],c=l[1];function s(e){return i.some((function(t){return t===e}))}return React.createElement(k,null,React.createElement("div",{className:"advgb-checkbox-wrapper"},React.createElement("label",null,n),React.createElement("div",{className:"advgb-checkbox-inline"},t.map((function(e){return React.createElement(w,{label:e.label,checked:s(e.slug),onChange:function(){return function(e){var n;if(s(e))n=i.filter((function(t){return t!==e}));else{var a=t.find((function(t){return t.slug===e}));n=[].concat(g(i),[a.slug])}var r=g(new Set(n));c(r),o&&o(n)}(e.slug)}})})))))}A.defaultProps={placement:"left",offset:40};var j=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=c(this,t,[e])).state={onChangeTime:null,currentTime:n.props.currentTime||null,hours:null,minutes:null,meridian:"am",onInit:!0},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}(t,e),n=t,(a=[{key:"componentWillMount",value:function(){var e=this.state,t=e.onChangeTime,n=e.currentTime,a=e.onInit;this.props.onChangeTime!==t&&this.setState({onChangeTime:this.props.onChangeTime}),this.props.currentTime!==n&&this.setState({currentTime:this.props.currentTime}),n&&n.includes(":")&&a&&this.setState({hours:n.split(":")[0],minutes:n.split(":")[1],meridian:parseInt(n.split(":")[0])>11?"pm":"am",onInit:!1})}},{key:"componentDidUpdate",value:function(e,t){var n=this.props,a=(n.onChangeTime,n.currentTime,this.state),o=a.hours,l=a.minutes,i=a.meridian,c=t.hours,s=t.minutes,u=t.meridian;if(o!==c||l!==s||i!==u){if(!o&&!l)return;o&&!l&&this.setState({minutes:"00"}),l&&!o&&this.setState({hours:"01"});var d="".concat(this.appendZero(r().to24Hour({hour:parseInt(o),meridiem:i})),":").concat(l,":00");this.props.onChangeTime(d)}}},{key:"appendZero",value:function(e){if(!isNaN(e)){var t=parseInt(e);return t>9?t:"0".concat(t)}}},{key:"render",value:function(){var e=this,t=this.state,n=(t.onChangeTime,t.currentTime,t.hours),a=t.minutes,o=t.meridian;return React.createElement(k,null,React.createElement("div",{className:"advgb-advtime-control"},React.createElement("label",null,this.props.label),React.createElement("div",{className:"advgb-advtime-hours-minutes"},React.createElement("input",{type:"text",value:n?this.appendZero(r().to12Hour(parseInt(n)).hour):"",onChange:function(t){var n=Math.max(1,Math.min(12,Number(t.target.value)));e.setState({hours:e.appendZero(n)})},onKeyDown:function(t){var n=Number(t.target.value);"ArrowUp"===t.key&&n<12?e.setState({hours:e.appendZero(n+1)}):"ArrowDown"===t.key&&n>1&&e.setState({hours:e.appendZero(n-1)})},placeholder:"--"}),React.createElement("span",null,":"),React.createElement("input",{type:"text",value:a||"",onChange:function(t){var n=Math.max(0,Math.min(59,Number(t.target.value)));e.setState({minutes:e.appendZero(n)})},onKeyDown:function(t){var n=Number(t.target.value);"ArrowUp"===t.key&&n<59?e.setState({minutes:e.appendZero(n+1)}):"ArrowDown"===t.key&&n>0&&e.setState({minutes:e.appendZero(n-1)})},placeholder:"--"})),React.createElement(h,{className:"advgb-advtime-meridian"},React.createElement(f,{variant:null===o||"am"===o?"primary":"secondary",onClick:function(){e.setState({meridian:"am"})},disabled:!n||!a},O("AM","advanced-gutenberg")),React.createElement(f,{variant:"pm"===o?"primary":"secondary",onClick:function(){e.setState({meridian:"pm"})},disabled:!n||!a},O("PM","advanced-gutenberg"))),n&&a&&React.createElement(f,{className:"advgb-advtime-remove-icon",icon:"no-alt",onClick:function(){e.props.onTimeClear(),e.setState({hours:null,minutes:null,meridian:"am"})}})))}}])&&l(n.prototype,a),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,a}(C);function B(e){var t=e.label,n=e.currentTime,a=e.onChangeTime,r=e.onTimeClear;return React.createElement(j,{label:t,currentTime:n,onChangeTime:a,onTimeClear:r})}function F(e){var t=e.label,n=e.defaultTimezone;return React.createElement(k,null,N("advgb.timezoneControl",React.createElement(k,null,React.createElement("div",{className:"advgb-promo-overlay-area"},React.createElement("div",{className:"advgb-blur"},t,React.createElement(S,{value:n,options:[{label:n,value:n}],disabled:!0})),React.createElement("div",{class:"advgb-pro-overlay-wrap"},React.createElement("div",{class:"advgb-pro-overlay-text advgb-tooltips ppb-tooltips-library click","data-toggle":"ppbtooltip","data-placement":"top"},React.createElement("span",{class:"advgb-promo-text"},O("Pro","advanced-gutenberg")),React.createElement("span",{class:"tooltip-text"},React.createElement("p",null,O("PublishPress Blocks Pro supports Timezone configuration.","advanced-gutenberg")),React.createElement("p",null,React.createElement("a",{class:"clickable",href:"https://publishpress.com/links/blocks",target:"_blank"},O("Upgrade to Pro","advanced-gutenberg"))),React.createElement("i",null))))),React.createElement(React.Fragment,null)),e))}var M=function(e){return e.map((function(e){return e.title}))},L=function(e,t){var n=[];return null!==t&&(n=e.map((function(e){var n=t.find((function(t){return t.slug===e}));return void 0!==n&&n?n.title:e}))),n},G=function(e,t){var n=[];return e.map((function(e){var a=t.find((function(t){return t.title===e}));void 0!==a&&n.push(a.slug)})),n};function I(e){return I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},I(e)}function z(e){return function(e){if(Array.isArray(e))return U(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return U(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?U(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function U(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=Array(t);n<t;n++)a[n]=e[n];return a}function H(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function W(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?H(Object(n),!0).forEach((function(t){Y(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):H(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Y(e,t,n){return(t=V(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Z(){Z=function(){return t};var e,t={},n=Object.prototype,a=n.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},l=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function u(e,t,n,a){var o=t&&t.prototype instanceof h?t:h,l=Object.create(o.prototype),i=new T(a||[]);return r(l,"_invoke",{value:k(e,n,i)}),l}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var g="suspendedStart",v="suspendedYield",p="executing",m="completed",b={};function h(){}function f(){}function y(){}var w={};s(w,l,(function(){return this}));var R=Object.getPrototypeOf,E=R&&R(R(N([])));E&&E!==n&&a.call(E,l)&&(w=E);var S=y.prototype=h.prototype=Object.create(w);function P(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function C(e,t){function n(r,o,l,i){var c=d(e[r],e,o);if("throw"!==c.type){var s=c.arg,u=s.value;return u&&"object"==I(u)&&a.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,l,i)}),(function(e){n("throw",e,l,i)})):t.resolve(u).then((function(e){s.value=e,l(s)}),(function(e){return n("throw",e,l,i)}))}i(c.arg)}var o;r(this,"_invoke",{value:function(e,a){function r(){return new t((function(t,r){n(e,a,t,r)}))}return o=o?o.then(r,r):r()}})}function k(t,n,a){var r=g;return function(o,l){if(r===p)throw Error("Generator is already running");if(r===m){if("throw"===o)throw l;return{value:e,done:!0}}for(a.method=o,a.arg=l;;){var i=a.delegate;if(i){var c=D(i,a);if(c){if(c===b)continue;return c}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if(r===g)throw r=m,a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);r=p;var s=d(t,n,a);if("normal"===s.type){if(r=a.done?m:v,s.arg===b)continue;return{value:s.arg,done:a.done}}"throw"===s.type&&(r=m,a.method="throw",a.arg=s.arg)}}}function D(t,n){var a=n.method,r=t.iterator[a];if(r===e)return n.delegate=null,"throw"===a&&t.iterator.return&&(n.method="return",n.arg=e,D(t,n),"throw"===n.method)||"return"!==a&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+a+"' method")),b;var o=d(r,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,b;var l=o.arg;return l?l.done?(n[t.resultName]=l.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,b):l:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,b)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function N(t){if(t||""===t){var n=t[l];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function n(){for(;++r<t.length;)if(a.call(t,r))return n.value=t[r],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(I(t)+" is not iterable")}return f.prototype=y,r(S,"constructor",{value:y,configurable:!0}),r(y,"constructor",{value:f,configurable:!0}),f.displayName=s(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,s(e,c,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},P(C.prototype),s(C.prototype,i,(function(){return this})),t.AsyncIterator=C,t.async=function(e,n,a,r,o){void 0===o&&(o=Promise);var l=new C(u(e,n,a,r),o);return t.isGeneratorFunction(n)?l:l.next().then((function(e){return e.done?e.value:l.next()}))},P(S),s(S,c,"Generator"),s(S,l,(function(){return this})),s(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var a in t)n.push(a);return n.reverse(),function e(){for(;n.length;){var a=n.pop();if(a in t)return e.value=a,e.done=!1,e}return e.done=!0,e}},t.values=N,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(O),!t)for(var n in this)"t"===n.charAt(0)&&a.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function r(a,r){return i.type="throw",i.arg=t,n.next=a,r&&(n.method="next",n.arg=e),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var l=this.tryEntries[o],i=l.completion;if("root"===l.tryLoc)return r("end");if(l.tryLoc<=this.prev){var c=a.call(l,"catchLoc"),s=a.call(l,"finallyLoc");if(c&&s){if(this.prev<l.catchLoc)return r(l.catchLoc,!0);if(this.prev<l.finallyLoc)return r(l.finallyLoc)}else if(c){if(this.prev<l.catchLoc)return r(l.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<l.finallyLoc)return r(l.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&a.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var l=o?o.completion:{};return l.type=e,l.arg=t,o?(this.method="next",this.next=o.finallyLoc,b):this.complete(l)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),b},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),O(n),b}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var a=n.completion;if("throw"===a.type){var r=a.arg;O(n)}return r}}throw Error("illegal catch attempt")},delegateYield:function(t,n,a){return this.delegate={iterator:N(t),resultName:n,nextLoc:a},"next"===this.method&&(this.arg=e),b}},t}function q(e,t,n,a,r,o,l){try{var i=e[o](l),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(a,r)}function K(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var o=e.apply(t,n);function l(e){q(o,a,r,l,i,"next",e)}function i(e){q(o,a,r,l,i,"throw",e)}l(void 0)}))}}function Q(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,V(a.key),a)}}function V(e){var t=function(e){if("object"!=I(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=I(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==I(t)?t:t+""}function $(e,t,n){return t=X(t),function(e,t){if(t&&("object"==I(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,J()?Reflect.construct(t,n||[],X(e).constructor):t.apply(e,n))}function J(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(J=function(){return!!e})()}function X(e){return X=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},X(e)}function ee(e,t){return ee=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ee(e,t)}!function(e,t,n,a){var r=e.__,o=e.sprintf,l=(t.Card,t.CardBody,t.CardHeader,t.Button),i=t.TextControl,c=t.TextareaControl,s=t.SelectControl,u=t.ToggleControl,d=(t.RangeControl,t.FormTokenField),g=t.Modal,v=t.Notice,p=t.Spinner,m=(t.PanelBody,t.BaseControl,t.RadioControl,t.DateTimePicker,n.Component),b=n.Fragment,h=(a.useSelect,a.useDispatch,function(e){var t=e.index,n=e.schedule,a=e.onChange,i=e.onRemove,c=e.getTimezoneLabel,s=e.getTimezoneSlug,d=e.canRemove;return React.createElement("div",{style:{marginBottom:5,padding:5,border:"1px solid #ddd",borderRadius:4}},React.createElement("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:16}},React.createElement("h4",null,o(r("Schedule #%d","advanced-gutenberg"),t+1)),d&&React.createElement(l,{isDestructive:!0,isLink:!0,onClick:i},r("Remove","advanced-gutenberg"))),React.createElement(A,{buttonLabel:r("Now","advanced-gutenberg"),dateLabel:r("Start showing","advanced-gutenberg"),date:n.dateFrom,onChangeDate:function(e){return a("dateFrom",e)},onDateClear:function(){return a("dateFrom",null)},onInvalidDate:!1}),React.createElement(A,{buttonLabel:r("Never","advanced-gutenberg"),dateLabel:r("Stop showing","advanced-gutenberg"),date:n.dateTo||null,onChangeDate:function(e){return a("dateTo",e)},onDateClear:function(){return a("dateTo",null)},onInvalidDate:function(e){if(n.dateFrom){var t=new Date(e.getTime());t.setHours(0,0,0,0);var a=new Date(n.dateFrom);return a.setHours(0,0,0,0),t.getTime()<a.getTime()}return!1}}),n.dateFrom&&n.dateTo&&React.createElement(u,{label:r("Recurring","advanced-gutenberg"),checked:n.recurring||!1,onChange:function(){return a("recurring",!n.recurring)},help:r("If Recurring is enabled, this block will be displayed every year between the selected dates.","advanced-gutenberg")}),React.createElement(_,{label:r("On these days (optional)","advanced-gutenberg"),days:n.days||[],onChangeDays:function(e){return a("days",e)}}),React.createElement("label",{style:{marginBottom:8,display:"block"}},r("Between these times (optional)","advanced-gutenberg")),React.createElement(B,{label:r("From","advanced-gutenberg"),currentTime:n.timeFrom||null,onChangeTime:function(e){return a("timeFrom",e)},onTimeClear:function(){return a("timeFrom",null)}}),React.createElement(B,{label:r("To","advanced-gutenberg"),currentTime:n.timeTo||null,onChangeTime:function(e){return a("timeTo",e)},onTimeClear:function(){return a("timeTo",null)}}),n.timeFrom&&n.timeTo&&"01/01/2020T"+n.timeFrom>="01/01/2020T"+n.timeTo&&React.createElement(v,{className:"advgb-notice-sidebar",status:"warning",isDismissible:!1},r('"To" time should be after "From" time!',"advanced-gutenberg")),React.createElement(F,{label:r("Timezone","advanced-gutenberg"),defaultTimezone:c(),value:n.timezone||s(),onChangeTimezone:function(e){return a("timezone",e)}}))}),f=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=$(this,t,[e])).state={presets:[],currentPreset:n.getDefaultPreset(),editingPreset:null,showModal:!1,modalMode:"create",loading:!1,saving:!1,error:null,deleting:!1,deletingPresetId:null,lastAction:null},n.handleModalClose=n.handleModalClose.bind(n),n.createNewPreset=n.createNewPreset.bind(n),n.editPreset=n.editPreset.bind(n),n.savePreset=n.savePreset.bind(n),n.deletePreset=n.deletePreset.bind(n),n.addControlSet=n.addControlSet.bind(n),n.removeControlSet=n.removeControlSet.bind(n),n.addRuleToSet=n.addRuleToSet.bind(n),n.removeRuleFromSet=n.removeRuleFromSet.bind(n),n.updateRuleData=n.updateRuleData.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ee(e,t)}(t,e),n=t,a=[{key:"componentDidMount",value:function(){this.setState({loading:!0}),this.initializePresets(),this.setupDataSync()}},{key:"componentWillUnmount",value:function(){this.dataUnsubscribe&&window.AdvGBPresetData&&window.AdvGBPresetData.unsubscribe(this.dataUnsubscribe)}},{key:"setupDataSync",value:function(){var e=this;window.AdvGBPresetData&&window.AdvGBPresetData.subscribe&&(this.dataUnsubscribe=window.AdvGBPresetData.subscribe((function(t){e.setState({presets:Array.isArray(t)?t:[],editingPreset:e.state.editingPreset&&t.find((function(t){return t.id===e.state.editingPreset.id}))?e.state.editingPreset:null,currentPreset:e.state.currentPreset&&t.find((function(t){return t.id===e.state.currentPreset.id}))?e.state.currentPreset:null})})))}},{key:"createSamplePresets",value:(w=K(Z().mark((function e(){var t;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({loading:!0,error:null}),e.prev=1,e.next=4,wp.apiFetch({path:"/advgb/v1/sample-presets",method:"POST"});case 4:(t=e.sent).success&&(window.AdvGBPresetData&&window.AdvGBPresetData.updatePresets(t.presets,"add"),this.setState({presets:t.presets,loading:!1}),this.showSuccessMessage(r("Sample presets created successfully!","advanced-gutenberg"))),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),console.error("Failed to create sample presets:",e.t0),this.setState({error:r("Failed to create sample presets","advanced-gutenberg"),loading:!1});case 12:case"end":return e.stop()}}),e,this,[[1,8]])}))),function(){return w.apply(this,arguments)})},{key:"initializePresets",value:(y=K(Z().mark((function e(){var t;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.waitForGlobalData();case 3:return e.next=5,this.loadPresetsFromSources();case 5:t=e.sent,this.setState({presets:t,loading:!1,currentPreset:this.getDefaultPreset()}),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.error("Failed to initialize presets:",e.t0),this.setState({loading:!1,error:r("Failed to load presets","advanced-gutenberg")});case 13:case"end":return e.stop()}}),e,this,[[0,9]])}))),function(){return y.apply(this,arguments)})},{key:"waitForGlobalData",value:function(){return new Promise((function(e){!function t(){window.AdvGBPresetData||window.advgb_block_controls_vars&&window.advgb_block_controls_vars.presets?e():setTimeout(t,100)}()}))}},{key:"loadPresetsFromSources",value:(f=K(Z().mark((function e(){var t,n,a;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,wp.apiFetch({path:"/advgb/v1/presets"});case 3:if(t=e.sent,!Array.isArray(t)){e.next=6;break}return e.abrupt("return",t);case 6:if(!window.AdvGBPresetData||"function"!=typeof window.AdvGBPresetData.getAllPresets){e.next=10;break}if(n=window.AdvGBPresetData.getAllPresets(),!Array.isArray(n)){e.next=10;break}return e.abrupt("return",n);case 10:case 20:return e.abrupt("return",[]);case 13:if(e.prev=13,e.t0=e.catch(0),console.warn("Failed to load presets:",e.t0),!window.AdvGBPresetData||"function"!=typeof window.AdvGBPresetData.getAllPresets){e.next=20;break}if(a=window.AdvGBPresetData.getAllPresets(),!Array.isArray(a)){e.next=20;break}return e.abrupt("return",a);case 21:case"end":return e.stop()}}),e,null,[[0,13]])}))),function(){return f.apply(this,arguments)})},{key:"loadPresets",value:function(){window.AdvGBPresetData&&this.setState({presets:window.AdvGBPresetData.getAllPresets(),loading:!1})}},{key:"getDefaultPreset",value:function(){return{id:null,title:"",controlSets:[],created:null,modified:null}}},{key:"savePreset",value:(m=K(Z().mark((function e(t){var n,a;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({saving:!0,error:null}),e.prev=1,e.next=4,wp.apiFetch({path:"/advgb/v1/presets",method:"POST",data:t});case 4:if(!(n=e.sent).success){e.next=11;break}return e.next=8,this.loadPresets();case 8:return n.presets.find((function(e){return e.id===n.id}))?(a=n.presets||[],window.AdvGBPresetData&&window.AdvGBPresetData.updatePresets(a),this.setState({editingPreset:null,currentPreset:null,saving:!1,showModal:!1,lastAction:"saved"})):this.setState({saving:!1,showModal:!1,lastAction:"saved"}),e.abrupt("return",n);case 11:e.next=17;break;case 13:throw e.prev=13,e.t0=e.catch(1),this.setState({error:e.t0.message,saving:!1,lastAction:"error"}),e.t0;case 17:case"end":return e.stop()}}),e,this,[[1,13]])}))),function(e){return m.apply(this,arguments)})},{key:"showSuccessMessage",value:function(e){setTimeout((function(){window.AdvGBPresetData&&window.AdvGBPresetData.advgbTimerStatus&&window.AdvGBPresetData.advgbTimerStatus(e,"success")}),300)}},{key:"deletePreset",value:(o=K(Z().mark((function e(t){var n;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(confirm(r("Are you sure you want to delete this preset?","advanced-gutenberg"))){e.next=2;break}return e.abrupt("return");case 2:return this.setState({deleting:!0,deletingPresetId:t}),e.prev=3,e.next=6,wp.apiFetch({path:"/advgb/v1/presets/".concat(t),method:"DELETE"});case 6:if(!(n=e.sent).success){e.next=13;break}return window.AdvGBPresetData&&window.AdvGBPresetData.updatePresets(n.presets,"delete"),this.state.editingPreset&&this.state.editingPreset.id===t&&this.setState({editingPreset:null,currentPreset:this.getDefaultPreset()}),this.setState({deleting:!1,deletingPresetId:null,currentPreset:null,editingPreset:null,lastAction:"deleted"}),e.next=13,this.loadPresets();case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(3),this.setState({deleting:!1,deletingPresetId:null,error:e.t0.message});case 18:case"end":return e.stop()}}),e,this,[[3,15]])}))),function(e){return o.apply(this,arguments)})},{key:"createNewPreset",value:function(){this.setState({currentPreset:this.getDefaultPreset(),editingPreset:null,modalMode:"create",showModal:!0,lastAction:"creating"})}},{key:"editPreset",value:function(e){this.setState({currentPreset:W({},e),modalMode:"edit",editingPreset:e,showModal:!0,lastAction:"editing"})}},{key:"addControlSet",value:function(){var e=[{id:Date.now().toString(),rules:[]}].concat(z(this.state.currentPreset.controlSets));this.setState({currentPreset:W(W({},this.state.currentPreset),{},{controlSets:e})})}},{key:"removeControlSet",value:function(e){if(confirm(r("Are you sure you want to remove this control set?","advanced-gutenberg"))){var t=this.state.currentPreset,n=t.controlSets.filter((function(t,n){return n!==e}));this.setState({currentPreset:W(W({},t),{},{controlSets:n})})}}},{key:"addRuleToSet",value:function(e,t){var n=this.createRuleByType(t),a=z(this.state.currentPreset.controlSets);a[e].rules.unshift(n),this.setState({currentPreset:W(W({},this.state.currentPreset),{},{controlSets:a})})}},{key:"createRuleByType",value:function(e){var t={id:Date.now(),type:e,enabled:!0};switch(e){case"schedule":return W(W({},t),{},{schedules:[]});case"user_role":return W(W({},t),{},{roles:[],approach:"include"});case"device_type":return W(W({},t),{},{devices:[]});case"browser_device":return W(W({},t),{},{browsers:[],approach:"include"});case"operating_system":return W(W({},t),{},{systems:[],approach:"include"});case"cookie":return W(W({},t),{},{name:"",condition:"=",value:"",approach:"include"});case"user_meta":case"post_meta":return W(W({},t),{},{key:"",condition:"=",value:"",approach:"include"});case"query_string":return W(W({},t),{},{queries:[],logic:"all",approach:"include"});case"capabilities":return W(W({},t),{},{capabilities:[],approach:"include"});default:return t}}},{key:"getAvailableRuleTypes",value:function(){return[{value:"schedule",label:r("Schedule","advanced-gutenberg")},{value:"user_role",label:r("User Roles","advanced-gutenberg")},{value:"device_type",label:r("Device Type","advanced-gutenberg")},{value:"browser_device",label:r("Browser & Device","advanced-gutenberg")},{value:"operating_system",label:r("Operating System","advanced-gutenberg")},{value:"cookie",label:r("Cookie","advanced-gutenberg")},{value:"user_meta",label:r("User Meta","advanced-gutenberg")},{value:"post_meta",label:r("Post Meta","advanced-gutenberg")},{value:"query_string",label:r("Query String","advanced-gutenberg")},{value:"capabilities",label:r("Capabilities","advanced-gutenberg")}]}},{key:"formatDate",value:function(e){if(!e)return r("Never modified","advanced-gutenberg");try{var t=new Date(e);return isNaN(t.getTime())?r("Invalid date","advanced-gutenberg"):t.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})}catch(e){return console.error("Date formatting error:",e),r("Invalid date","advanced-gutenberg")}}},{key:"renderControlRule",value:function(e,t,n){var a=this;return React.createElement("div",{className:"advgb-control-rule"},React.createElement("div",{className:"advgb-rule-header"},React.createElement("div",{className:"advgb-rule-type"},React.createElement("span",{className:"advgb-rule-type-icon"},"📋"),React.createElement("span",{className:"advgb-rule-type-label"},this.getRuleTypeLabel(e.type))),React.createElement(l,{isSmall:!0,isDestructive:!0,icon:"no",label:r("Remove Rule","advanced-gutenberg"),onClick:function(){return a.removeRuleFromSet(t,n)}})),React.createElement("div",{className:"advgb-rule-content"},this.renderRuleConfiguration(e,t,n)))}},{key:"getRuleTypeLabel",value:function(e){var t=this.getAvailableRuleTypes().find((function(t){return t.value===e}));return t?t.label:e}},{key:"renderPresetList",value:function(){var e=this,t=this.state,n=t.presets,a=t.editingPreset;return React.createElement("div",{className:"advgb-presets-list"},(!n||0===n.length)&&React.createElement("div",{className:"advgb-empty-presets-message"},React.createElement("div",{className:"advgb-empty-icon"},"📋"),React.createElement("h3",null,r("No presets yet","advanced-gutenberg")),React.createElement("p",null,r("Create your first preset or generate sample presets to get started.","advanced-gutenberg")),React.createElement("div",{className:"advgb-empty-actions"},React.createElement(l,{isPrimary:!0,onClick:function(){return e.createNewPreset()},className:"advgb-create-first-btn"},r("Create First Preset","advanced-gutenberg")),React.createElement(l,{isSecondary:!0,onClick:function(){return e.createSamplePresets()},className:"advgb-create-samples-btn"},r("Create Sample Presets","advanced-gutenberg")))),n&&n.length>0&&n.map((function(t){var n=["advgb-preset-item",a&&a.id===t.id&&"active"].filter(Boolean).join(" ");return React.createElement("div",{key:t.id,className:n,onClick:function(){return e.editPreset(t)}},React.createElement("div",{className:"advgb-preset-content"},React.createElement("span",{className:"advgb-preset-title",title:t.title},t.title),React.createElement("span",{className:"advgb-preset-date"},t.modified?e.formatDate(t.modified):r("Never modified","advanced-gutenberg"))),React.createElement("div",{className:"advgb-preset-actions"},React.createElement(l,{isSmall:!0,icon:"edit",label:r("Edit","advanced-gutenberg"),onClick:function(n){n.stopPropagation(),e.editPreset(t)}}),React.createElement(l,{isSmall:!0,isDestructive:!0,icon:"trash",label:r("Delete","advanced-gutenberg"),onClick:function(n){n.stopPropagation(),e.deletePreset(t.id)}})))})))}},{key:"renderPresetForm",value:function(){var e=this,t=this.state,n=t.currentPreset,a=t.saving;return n?React.createElement("div",{className:"advgb-preset-form"},React.createElement("div",{className:"advgb-preset-header"},React.createElement("div",{className:"advgb-preset-title-section"},React.createElement("h2",null,r("Preset Settings","advanced-gutenberg")),React.createElement(i,{label:r("Preset Title","advanced-gutenberg"),value:n.title||"",onChange:function(t){return e.setState({currentPreset:W(W({},n),{},{title:t})})},placeholder:r("Enter preset name","advanced-gutenberg"),className:"advgb-title-input"}))),React.createElement("div",{className:"advgb-control-sets-container"},React.createElement("div",{className:"advgb-control-sets-header"},React.createElement("h3",null,r("Control Sets","advanced-gutenberg")),React.createElement("p",{className:"advgb-control-sets-description"},r("Show the block if any control set applies. Each set can contain multiple rules.","advanced-gutenberg")),React.createElement(l,{isPrimary:!0,icon:"plus",onClick:this.addControlSet,className:"advgb-add-set-btn"},r("Add Control Set","advanced-gutenberg"))),React.createElement("div",{className:"advgb-control-sets"},(n.controlSets||[]).map((function(t,n){return React.createElement(b,{key:t.id||n},n>0&&React.createElement("div",{className:"advgb-set-separator"},React.createElement("span",{className:"advgb-separator-text"},r("OR","advanced-gutenberg"))),e.renderControlSet(t,n))})))),React.createElement("div",{className:"advgb-preset-actions"},React.createElement(l,{isPrimary:!0,onClick:function(){return e.savePreset(e.state.currentPreset)},disabled:a||!n.title,isBusy:a,className:"advgb-save-btn"},r(a?"Saving...":"Save Preset","advanced-gutenberg")),React.createElement(l,{isSecondary:!0,onClick:this.handleModalClose,disabled:a},r("Cancel","advanced-gutenberg")))):null}},{key:"renderControlSet",value:function(e,t){var n=this;return React.createElement("div",{className:"advgb-control-set",key:e.id||t},React.createElement("div",{className:"advgb-control-set-header"},React.createElement("div",{className:"advgb-set-info"},React.createElement("h4",null,r("Control Set","advanced-gutenberg")," ",t+1),React.createElement("p",null,r("Show the block if any rule applies. Rules are evaluated with AND logic.","advanced-gutenberg"))),React.createElement("div",{className:"advgb-set-actions"},React.createElement(s,{value:"",options:[{value:"",label:r("Add Rule","advanced-gutenberg")}].concat(z(this.getAvailableRuleTypes())),onChange:function(e){e&&n.addRuleToSet(t,e)},className:"advgb-add-rule-select"}),React.createElement(l,{isSmall:!0,isDestructive:!0,icon:"trash",label:r("Delete Set","advanced-gutenberg"),onClick:function(){return n.removeControlSet(t)}}))),React.createElement("div",{className:"advgb-control-set-rules"},(e.rules||[]).map((function(e,a){return React.createElement("div",{key:e.id||a,className:"advgb-rule-container"},a>0&&React.createElement("div",{className:"advgb-rule-separator"},React.createElement("span",{className:"advgb-separator-text"},r("AND","advanced-gutenberg"))),n.renderControlRule(e,t,a))})),(!e.rules||0===e.rules.length)&&React.createElement("div",{className:"advgb-no-rules"},React.createElement("div",{className:"advgb-no-rules-icon"},"⚡"),React.createElement("p",null,r("No rules added yet. Add rules to define when this block should be visible.","advanced-gutenberg")))))}},{key:"renderRuleConfiguration",value:function(e,t,n){switch(e.type){case"schedule":return this.renderScheduleConfig(e,t,n);case"user_role":return this.renderUserRoleConfig(e,t,n);case"device_type":return this.renderDeviceTypeConfig(e,t,n);case"device_width":return this.renderDeviceWidthConfig(e,t,n);case"browser_device":return this.renderBrowserDeviceConfig(e,t,n);case"operating_system":return this.renderOperatingSystemConfig(e,t,n);case"cookie":return this.renderCookieConfig(e,t,n);case"user_meta":return this.renderUserMetaConfig(e,t,n);case"post_meta":return this.renderPostMetaConfig(e,t,n);case"query_string":return this.renderQueryStringConfig(e,t,n);case"capabilities":return this.renderCapabilitiesConfig(e,t,n);case"archive":return this.renderArchiveConfig(e,t,n);case"page":return this.renderPageConfig(e,t,n);default:return React.createElement("p",null,r("Configuration for this rule type is missing.","advanced-gutenberg"))}}},{key:"updateRuleData",value:function(e,t,n,a){var r=this.state.currentPreset,o=z(r.controlSets);o[e].rules[t][n]=a,this.setState({currentPreset:W(W({},r),{},{controlSets:o})})}},{key:"removeRuleFromSet",value:function(e,t){var n=this.state.currentPreset,a=z(n.controlSets);a[e].rules.splice(t,1),this.setState({currentPreset:W(W({},n),{},{controlSets:a})})}},{key:"handleModalClose",value:function(){this.setState({showModal:!1,currentPreset:null,editingPreset:null,modalMode:"create",lastAction:"cancelled"})}},{key:"getBrowserOptions",value:function(){return[{slug:"chrome",title:"Chrome"},{slug:"firefox",title:"Firefox"},{slug:"safari",title:"Safari"},{slug:"edge",title:"Edge"},{slug:"opera",title:"Opera"},{slug:"internet explorer",title:"Internet Explorer"}]}},{key:"getOperatingSystemOptions",value:function(){return[{slug:"windows",title:"Windows"},{slug:"mac",title:"macOS"},{slug:"linux",title:"Linux"},{slug:"android",title:"Android"},{slug:"ios",title:"iOS"},{slug:"chrome os",title:"Chrome OS"}]}},{key:"getConditionOptions",value:function(){return[{label:"=",value:"="},{label:"!=",value:"!="},{label:"<",value:"<"},{label:">",value:">"},{label:"<=",value:"<="},{label:">=",value:">="},{label:"contains",value:"contains"},{label:"begins with",value:"beginsWith"},{label:"ends with",value:"endsWith"},{label:"does not contain",value:"doesNotContain"},{label:"does not begin with",value:"doesNotBeginWith"},{label:"does not end with",value:"doesNotEndWith"},{label:"is null",value:"null"},{label:"is not null",value:"notNull"},{label:"in",value:"in"},{label:"not in",value:"notIn"},{label:"between",value:"between"},{label:"not between",value:"notBetween"}]}},{key:"getUserRoles",value:function(){return void 0!==advgb_block_controls_vars.user_roles?advgb_block_controls_vars.user_roles:[]}},{key:"getCapabilitiesOptions",value:function(){return(void 0!==advgb_block_controls_vars.capabilities?advgb_block_controls_vars.capabilities:[]).map((function(e){return{slug:e,title:e.split("_").map((function(e){return e.charAt(0).toUpperCase()+e.slice(1)})).join(" ")}}))}},{key:"getArchiveOptions",value:function(){return[{slug:"category",title:r("Category Archives","advanced-gutenberg")},{slug:"tag",title:r("Tag Archives","advanced-gutenberg")},{slug:"date",title:r("Date Archives","advanced-gutenberg")},{slug:"author",title:r("Author Archives","advanced-gutenberg")}]}},{key:"getPageOptions",value:function(){return void 0!==advgb_block_controls_vars.page?advgb_block_controls_vars.page:[]}},{key:"getTimezoneLabel",value:function(){return r("WordPress settings timezone","advanced-gutenberg")}},{key:"getTimezoneSlug",value:function(){return void 0!==advgbBlocks.timezone&&advgbBlocks.timezone.length?advgbBlocks.timezone:"UTC"}},{key:"renderScheduleConfig",value:function(e,t,n){var a=this,o=e.schedules&&e.schedules.length>0?e.schedules:[{dateFrom:null,dateTo:null,recurring:!1,days:[],timeFrom:null,timeTo:null,timezone:this.getTimezoneSlug()}];return React.createElement(b,null,o.map((function(e,r){return React.createElement(h,{key:r,index:r,schedule:e,onChange:function(e,l){var i=z(o);i[r][e]=l,a.updateRuleData(t,n,"schedules",i)},onRemove:function(){if(o.length>1){var e=o.filter((function(e,t){return t!==r}));a.updateRuleData(t,n,"schedules",e)}},getTimezoneLabel:function(){return a.getTimezoneLabel()},getTimezoneSlug:function(){return a.getTimezoneSlug()},canRemove:o.length>1})})),React.createElement("div",{style:{marginBottom:16}},React.createElement(l,{style:{width:"100%",display:"block"},isSecondary:!0,onClick:function(){var e={dateFrom:null,dateTo:null,recurring:!1,days:[],timeFrom:null,timeTo:null,timezone:a.getTimezoneSlug()};a.updateRuleData(t,n,"schedules",[].concat(z(o),[e]))}},r("Add Another Schedule","advanced-gutenberg"))))}},{key:"renderUserRoleConfig",value:function(e,t,n){var a=this;return React.createElement(b,null,React.createElement(s,{label:r("Approach","advanced-gutenberg"),value:e.approach||"public",options:[{value:"public",label:r("Show to everyone","advanced-gutenberg")},{value:"hidden",label:r("Hide from everyone","advanced-gutenberg")},{value:"login",label:r("Show to logged in users","advanced-gutenberg")},{value:"logout",label:r("Show to logged out users","advanced-gutenberg")},{value:"include",label:r("Show to selected user roles","advanced-gutenberg")},{value:"exclude",label:r("Hide from selected user roles","advanced-gutenberg")}],onChange:function(e){return a.updateRuleData(t,n,"approach",e)}}),("include"===e.approach||"exclude"===e.approach)&&React.createElement(d,{multiple:!0,label:r("Select user roles","advanced-gutenberg"),placeholder:r("Search roles","advanced-gutenberg"),suggestions:M(this.getUserRoles()),maxSuggestions:10,value:L(e.roles||[],this.getUserRoles()),onChange:function(e){a.updateRuleData(t,n,"roles",G(e,a.getUserRoles()))},__experimentalExpandOnFocus:!0}))}},{key:"renderDeviceTypeConfig",value:function(e,t,n){var a=this,o=e.devices||[];return React.createElement(b,null,React.createElement("div",{style:{paddingLeft:"17%"}},["desktop","tablet","mobile","robot"].map((function(e){return React.createElement(u,{key:e,label:r(e.charAt(0).toUpperCase()+e.slice(1),"advanced-gutenberg"),checked:o.includes(e),onChange:function(){var r=o.includes(e)?o.filter((function(t){return t!==e})):[].concat(z(o),[e]);a.updateRuleData(t,n,"devices",r)}})}))))}},{key:"renderDeviceWidthConfig",value:function(e,t,n){var a=this;return React.createElement(b,null,React.createElement(i,{type:"number",label:r("Minimum width (px)","advanced-gutenberg"),value:e.min_width||"",onChange:function(e){return a.updateRuleData(t,n,"min_width",e)},placeholder:r("No minimum","advanced-gutenberg")}),React.createElement(i,{type:"number",label:r("Maximum width (px)","advanced-gutenberg"),value:e.max_width||"",onChange:function(e){return a.updateRuleData(t,n,"max_width",e)},placeholder:r("No maximum","advanced-gutenberg")}))}},{key:"renderBrowserDeviceConfig",value:function(e,t,n){var a=this;return React.createElement(b,null,React.createElement(d,{multiple:!0,label:r("Select Browsers","advanced-gutenberg"),placeholder:r("Search browsers","advanced-gutenberg"),suggestions:M(this.getBrowserOptions()),maxSuggestions:10,value:L(e.browsers||[],this.getBrowserOptions()),onChange:function(e){a.updateRuleData(t,n,"browsers",G(e,a.getBrowserOptions()))},__experimentalExpandOnFocus:!0}),React.createElement(s,{label:r("Approach","advanced-gutenberg"),value:e.approach||"include",options:[{label:r("Show to selected browsers","advanced-gutenberg"),value:"include"},{label:r("Hide from selected browsers","advanced-gutenberg"),value:"exclude"}],onChange:function(e){return a.updateRuleData(t,n,"approach",e)}}))}},{key:"renderOperatingSystemConfig",value:function(e,t,n){var a=this;return React.createElement(b,null,React.createElement(d,{multiple:!0,label:r("Select Operating Systems","advanced-gutenberg"),placeholder:r("Search operating systems","advanced-gutenberg"),suggestions:M(this.getOperatingSystemOptions()),maxSuggestions:10,value:L(e.systems||[],this.getOperatingSystemOptions()),onChange:function(e){a.updateRuleData(t,n,"systems",G(e,a.getOperatingSystemOptions()))},__experimentalExpandOnFocus:!0}),React.createElement(s,{label:r("Approach","advanced-gutenberg"),value:e.approach||"include",options:[{label:r("Show to selected OS","advanced-gutenberg"),value:"include"},{label:r("Hide from selected OS","advanced-gutenberg"),value:"exclude"}],onChange:function(e){return a.updateRuleData(t,n,"approach",e)}}))}},{key:"renderCookieConfig",value:function(e,t,n){var a=this;return React.createElement(b,null,React.createElement(i,{label:r("Cookie Name","advanced-gutenberg"),value:e.name||"",onChange:function(e){return a.updateRuleData(t,n,"name",e)}}),React.createElement(s,{label:r("Condition","advanced-gutenberg"),value:e.condition||"=",options:this.getConditionOptions(),onChange:function(e){return a.updateRuleData(t,n,"condition",e)}}),React.createElement(i,{label:r("Value","advanced-gutenberg"),value:e.value||"",onChange:function(e){return a.updateRuleData(t,n,"value",e)}}),React.createElement(s,{label:r("Approach","advanced-gutenberg"),value:e.approach||"include",options:[{label:r("Show when condition matches","advanced-gutenberg"),value:"include"},{label:r("Hide when condition matches","advanced-gutenberg"),value:"exclude"}],onChange:function(e){return a.updateRuleData(t,n,"approach",e)}}))}},{key:"renderUserMetaConfig",value:function(e,t,n){var a=this;return React.createElement(b,null,React.createElement(i,{label:r("Meta Key","advanced-gutenberg"),value:e.key||"",onChange:function(e){return a.updateRuleData(t,n,"key",e)}}),React.createElement(s,{label:r("Condition","advanced-gutenberg"),value:e.condition||"=",options:this.getConditionOptions(),onChange:function(e){return a.updateRuleData(t,n,"condition",e)}}),React.createElement(i,{label:r("Value","advanced-gutenberg"),value:e.value||"",onChange:function(e){return a.updateRuleData(t,n,"value",e)}}),React.createElement(s,{label:r("Approach","advanced-gutenberg"),value:e.approach||"include",options:[{label:r("Show when condition matches","advanced-gutenberg"),value:"include"},{label:r("Hide when condition matches","advanced-gutenberg"),value:"exclude"}],onChange:function(e){return a.updateRuleData(t,n,"approach",e)}}))}},{key:"renderPostMetaConfig",value:function(e,t,n){var a=this;return React.createElement(b,null,React.createElement(i,{label:r("Meta Key","advanced-gutenberg"),value:e.key||"",onChange:function(e){return a.updateRuleData(t,n,"key",e)}}),React.createElement(s,{label:r("Condition","advanced-gutenberg"),value:e.condition||"=",options:this.getConditionOptions(),onChange:function(e){return a.updateRuleData(t,n,"condition",e)}}),React.createElement(i,{label:r("Value","advanced-gutenberg"),value:e.value||"",onChange:function(e){return a.updateRuleData(t,n,"value",e)}}),React.createElement(s,{label:r("Approach","advanced-gutenberg"),value:e.approach||"include",options:[{label:r("Show when condition matches","advanced-gutenberg"),value:"include"},{label:r("Hide when condition matches","advanced-gutenberg"),value:"exclude"}],onChange:function(e){return a.updateRuleData(t,n,"approach",e)}}))}},{key:"renderQueryStringConfig",value:function(e,t,n){var a,o=this;return React.createElement(b,null,React.createElement(c,{label:r("Query Parameters","advanced-gutenberg"),help:r("Enter query parameter names, one per line","advanced-gutenberg"),value:(null===(a=e.queries)||void 0===a?void 0:a.join("\n"))||"",onChange:function(e){var a=e.split("\n").map((function(e){return e.trim()})).filter((function(e){return e.length>0}));o.updateRuleData(t,n,"queries",a)},placeholder:r("utm_source\nutm_medium\nref","advanced-gutenberg")}),React.createElement(s,{label:r("Logic","advanced-gutenberg"),value:e.logic||"all",options:[{label:r("All parameters must be present","advanced-gutenberg"),value:"all"},{label:r("Any parameter must be present","advanced-gutenberg"),value:"any"}],onChange:function(e){return o.updateRuleData(t,n,"logic",e)}}),React.createElement(s,{label:r("Approach","advanced-gutenberg"),value:e.approach||"include",options:[{label:r("Show when condition matches","advanced-gutenberg"),value:"include"},{label:r("Hide when condition matches","advanced-gutenberg"),value:"exclude"}],onChange:function(e){return o.updateRuleData(t,n,"approach",e)}}))}},{key:"renderCapabilitiesConfig",value:function(e,t,n){var a=this;return React.createElement(b,null,React.createElement(d,{multiple:!0,label:r("Select Capabilities","advanced-gutenberg"),placeholder:r("Search capabilities","advanced-gutenberg"),suggestions:M(this.getCapabilitiesOptions()),maxSuggestions:10,value:L(e.capabilities||[],this.getCapabilitiesOptions()),onChange:function(e){a.updateRuleData(t,n,"capabilities",G(e,a.getCapabilitiesOptions()))},__experimentalExpandOnFocus:!0}),React.createElement(s,{label:r("Approach","advanced-gutenberg"),value:e.approach||"include",options:[{label:r("Show to users with selected capabilities","advanced-gutenberg"),value:"include"},{label:r("Hide from users with selected capabilities","advanced-gutenberg"),value:"exclude"}],onChange:function(e){return a.updateRuleData(t,n,"approach",e)}}))}},{key:"renderArchiveConfig",value:function(e,t,n){var a=this;return React.createElement(b,null,React.createElement(d,{multiple:!0,label:r("Select Archive Types","advanced-gutenberg"),placeholder:r("Search archive types","advanced-gutenberg"),suggestions:M(this.getArchiveOptions()),maxSuggestions:10,value:L(e.archives||[],this.getArchiveOptions()),onChange:function(e){a.updateRuleData(t,n,"archives",G(e,a.getArchiveOptions()))},__experimentalExpandOnFocus:!0}),React.createElement(s,{label:r("Approach","advanced-gutenberg"),value:e.approach||"include",options:[{label:r("Show on selected archives","advanced-gutenberg"),value:"include"},{label:r("Hide from selected archives","advanced-gutenberg"),value:"exclude"}],onChange:function(e){return a.updateRuleData(t,n,"approach",e)}}))}},{key:"renderPageConfig",value:function(e,t,n){var a=this;return React.createElement(b,null,React.createElement(d,{multiple:!0,label:r("Select Pages","advanced-gutenberg"),placeholder:r("Search pages","advanced-gutenberg"),suggestions:M(this.getPageOptions()),maxSuggestions:10,value:L(e.pages||[],this.getPageOptions()),onChange:function(e){a.updateRuleData(t,n,"pages",G(e,a.getPageOptions()))},__experimentalExpandOnFocus:!0}),React.createElement(s,{label:r("Approach","advanced-gutenberg"),value:e.approach||"include",options:[{label:r("Show on selected pages","advanced-gutenberg"),value:"include"},{label:r("Hide from selected pages","advanced-gutenberg"),value:"exclude"}],onChange:function(e){return a.updateRuleData(t,n,"approach",e)}}))}},{key:"renderContextualMessage",value:function(e){var t,n,a,o=this;switch(e){case"cancelled":t="↩️",n=r("Edit Cancelled","advanced-gutenberg"),a=r("Edit cancelled. Select another preset to edit or create a new one.","advanced-gutenberg");break;case"saved":t="✅",n=r("Preset Saved!","advanced-gutenberg"),a=r("Preset saved successfully! Choose another preset to edit or create a new one.","advanced-gutenberg");break;case"deleted":t="🗑️",n=r("Preset Deleted","advanced-gutenberg"),a=r("Preset deleted. Select another preset to edit or create a new one.","advanced-gutenberg");break;case"error":t="⚠️",n=r("Action Completed","advanced-gutenberg"),a=r("Operation completed. You can continue editing presets or create new ones.","advanced-gutenberg");break;case"loaded":t="📋",n=r("Select a Preset to Edit","advanced-gutenberg"),a=r("Choose a preset from the list to edit its rules, or create a new preset to get started.","advanced-gutenberg");break;case"empty":t="📝",n=r("No Presets Yet","advanced-gutenberg"),a=r("Create your first preset to start managing block visibility rules.","advanced-gutenberg");break;default:t="👋",n=r("Manage Your Presets","advanced-gutenberg"),a=r("Select a preset to edit or create a new one to control block visibility.","advanced-gutenberg")}return React.createElement(React.Fragment,null,React.createElement("div",{className:"advgb-guidance-icon"},t),React.createElement("h3",null,n),React.createElement("p",null,a),React.createElement("div",{className:"advgb-guidance-actions"},React.createElement(l,{isPrimary:!0,onClick:function(){return o.createNewPreset()},className:"advgb-guidance-create-btn"},r("Create New Preset","advanced-gutenberg")),"loaded"===e&&React.createElement(l,{isSecondary:!0,onClick:function(){return o.createSamplePresets()},className:"advgb-guidance-samples-btn"},r("Add More Samples","advanced-gutenberg"))))}},{key:"render",value:function(){var e=this,t=this.state,n=(t.showModal,t.loading),a=t.error,o=t.currentPreset,i=t.editingPreset,c=t.deleting,s=t.presets,u=t.lastAction,d=this.props.isModal,m=void 0!==d&&d,b=o||i,h=s&&s.length>0;if(n)return React.createElement("div",{className:"advgb-preset-loading-container"},React.createElement("div",{className:"advgb-preset-loading-spinner"},React.createElement("div",{className:"advgb-spinner"},React.createElement("div",{className:"advgb-spinner-circle"})),React.createElement("p",null,r("Loading presets...","advanced-gutenberg"))));if(a)return React.createElement(v,{status:"error"},a);var f=React.createElement("div",{className:"advgb-preset-manager ".concat(c?"deleting":"")},c&&React.createElement("div",{className:"advgb-preset-deleting-overlay"},React.createElement("div",{className:"advgb-preset-deleting-message"},React.createElement(p,null))),React.createElement("div",{className:"advgb-preset-sidebar"},React.createElement("div",{className:"advgb-preset-sidebar-header"},React.createElement("h3",null,r("Presets","advanced-gutenberg")),h&&!b&&React.createElement(l,{isPrimary:!0,onClick:function(){return e.createNewPreset()}},r("Add New","advanced-gutenberg"))),this.renderPresetList()),React.createElement("div",{className:"advgb-preset-editor"},(h||"creating"==u)&&b&&this.renderPresetForm(),!h&&"creating"!==u&&React.createElement("div",{className:"advgb-welcome-message"},React.createElement("div",{className:"advgb-welcome-icon"},"🚀"),React.createElement("h3",null,r("Welcome to Block Control Presets","advanced-gutenberg")),React.createElement("p",null,r("Create your first preset or generate sample presets to get started with advanced block visibility rules.","advanced-gutenberg"))),h&&!b&&React.createElement("div",{className:"advgb-guidance-message","data-action":u},this.renderContextualMessage(u))));return m?React.createElement(g,{title:r("Block Control Presets","advanced-gutenberg"),onRequestClose:this.handleModalClose,isDismissible:!0,shouldCloseOnClickOutside:!1,shouldCloseOnEsc:!0,isFullScreen:!0,className:"advgb-preset-modal"},f):f}}],a&&Q(n.prototype,a),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,a,o,m,f,y,w}(m);window.AdvGBPresetManager=f}(wp.i18n,wp.components,wp.element,wp.data)})();
//# sourceMappingURL=preset-manager.js.map